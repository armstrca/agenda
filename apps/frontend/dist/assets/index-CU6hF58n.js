import{P as Cr,a as Tr,j as Dr,k as Ar,p as Rr,E as Mr,h as Lr,R as Br}from"./index-hgCRUPzZ.js";import{R as V,r as $}from"./index-DgBv5UP-.js";var W="top",Y="bottom",K="right",k="left",wt="auto",$e=[W,Y,K,k],Ce="start",Ve="end",Pr="clippingParents",Jt="viewport",je="popper",jr="reference",Lt=$e.reduce(function(t,e){return t.concat([e+"-"+Ce,e+"-"+Ve])},[]),Qt=[].concat($e,[wt]).reduce(function(t,e){return t.concat([e,e+"-"+Ce,e+"-"+Ve])},[]),Hr="beforeRead",Ir="read",Nr="afterRead",Vr="beforeMain",_r="main",$r="afterMain",Wr="beforeWrite",kr="write",Ur="afterWrite",Fr=[Hr,Ir,Nr,Vr,_r,$r,Wr,kr,Ur];function ne(t){return t?(t.nodeName||"").toLowerCase():null}function q(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ye(t){var e=q(t).Element;return t instanceof e||t instanceof Element}function X(t){var e=q(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Et(t){if(typeof ShadowRoot>"u")return!1;var e=q(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function qr(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},o=e.elements[r];!X(o)||!ne(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(l){var u=i[l];u===!1?o.removeAttribute(l):o.setAttribute(l,u===!0?"":u)}))})}function zr(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],o=e.attributes[n]||{},l=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),u=l.reduce(function(s,p){return s[p]="",s},{});!X(i)||!ne(i)||(Object.assign(i.style,u),Object.keys(o).forEach(function(s){i.removeAttribute(s)}))})}}const Zt={name:"applyStyles",enabled:!0,phase:"write",fn:qr,effect:zr,requires:["computeStyles"]};function re(t){return t.split("-")[0]}var ge=Math.max,nt=Math.min,Te=Math.round;function ht(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function er(){return!/^((?!chrome|android).)*safari/i.test(ht())}function De(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),i=1,o=1;e&&X(t)&&(i=t.offsetWidth>0&&Te(n.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Te(n.height)/t.offsetHeight||1);var l=ye(t)?q(t):window,u=l.visualViewport,s=!er()&&r,p=(n.left+(s&&u?u.offsetLeft:0))/i,f=(n.top+(s&&u?u.offsetTop:0))/o,h=n.width/i,y=n.height/o;return{width:h,height:y,top:f,right:p+h,bottom:f+y,left:p,x:p,y:f}}function Ot(t){var e=De(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function tr(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&Et(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function ue(t){return q(t).getComputedStyle(t)}function Xr(t){return["table","td","th"].indexOf(ne(t))>=0}function fe(t){return((ye(t)?t.ownerDocument:t.document)||window.document).documentElement}function ot(t){return ne(t)==="html"?t:t.assignedSlot||t.parentNode||(Et(t)?t.host:null)||fe(t)}function Bt(t){return!X(t)||ue(t).position==="fixed"?null:t.offsetParent}function Yr(t){var e=/firefox/i.test(ht()),r=/Trident/i.test(ht());if(r&&X(t)){var n=ue(t);if(n.position==="fixed")return null}var i=ot(t);for(Et(i)&&(i=i.host);X(i)&&["html","body"].indexOf(ne(i))<0;){var o=ue(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function We(t){for(var e=q(t),r=Bt(t);r&&Xr(r)&&ue(r).position==="static";)r=Bt(r);return r&&(ne(r)==="html"||ne(r)==="body"&&ue(r).position==="static")?e:r||Yr(t)||e}function xt(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function He(t,e,r){return ge(t,nt(e,r))}function Kr(t,e,r){var n=He(t,e,r);return n>r?r:n}function rr(){return{top:0,right:0,bottom:0,left:0}}function nr(t){return Object.assign({},rr(),t)}function ir(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var Gr=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,nr(typeof e!="number"?e:ir(e,$e))};function Jr(t){var e,r=t.state,n=t.name,i=t.options,o=r.elements.arrow,l=r.modifiersData.popperOffsets,u=re(r.placement),s=xt(u),p=[k,K].indexOf(u)>=0,f=p?"height":"width";if(!(!o||!l)){var h=Gr(i.padding,r),y=Ot(o),v=s==="y"?W:k,b=s==="y"?Y:K,g=r.rects.reference[f]+r.rects.reference[s]-l[s]-r.rects.popper[f],w=l[s]-r.rects.reference[s],S=We(o),T=S?s==="y"?S.clientHeight||0:S.clientWidth||0:0,D=g/2-w/2,a=h[v],O=T-y[f]-h[b],d=T/2-y[f]/2+D,x=He(a,d,O),M=s;r.modifiersData[n]=(e={},e[M]=x,e.centerOffset=x-d,e)}}function Qr(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||tr(e.elements.popper,i)&&(e.elements.arrow=i))}const Zr={name:"arrow",enabled:!0,phase:"main",fn:Jr,effect:Qr,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ae(t){return t.split("-")[1]}var en={top:"auto",right:"auto",bottom:"auto",left:"auto"};function tn(t,e){var r=t.x,n=t.y,i=e.devicePixelRatio||1;return{x:Te(r*i)/i||0,y:Te(n*i)/i||0}}function Pt(t){var e,r=t.popper,n=t.popperRect,i=t.placement,o=t.variation,l=t.offsets,u=t.position,s=t.gpuAcceleration,p=t.adaptive,f=t.roundOffsets,h=t.isFixed,y=l.x,v=y===void 0?0:y,b=l.y,g=b===void 0?0:b,w=typeof f=="function"?f({x:v,y:g}):{x:v,y:g};v=w.x,g=w.y;var S=l.hasOwnProperty("x"),T=l.hasOwnProperty("y"),D=k,a=W,O=window;if(p){var d=We(r),x="clientHeight",M="clientWidth";if(d===q(r)&&(d=fe(r),ue(d).position!=="static"&&u==="absolute"&&(x="scrollHeight",M="scrollWidth")),d=d,i===W||(i===k||i===K)&&o===Ve){a=Y;var P=h&&d===O&&O.visualViewport?O.visualViewport.height:d[x];g-=P-n.height,g*=s?1:-1}if(i===k||(i===W||i===Y)&&o===Ve){D=K;var L=h&&d===O&&O.visualViewport?O.visualViewport.width:d[M];v-=L-n.width,v*=s?1:-1}}var j=Object.assign({position:u},p&&en),B=f===!0?tn({x:v,y:g},q(r)):{x:v,y:g};if(v=B.x,g=B.y,s){var R;return Object.assign({},j,(R={},R[a]=T?"0":"",R[D]=S?"0":"",R.transform=(O.devicePixelRatio||1)<=1?"translate("+v+"px, "+g+"px)":"translate3d("+v+"px, "+g+"px, 0)",R))}return Object.assign({},j,(e={},e[a]=T?g+"px":"",e[D]=S?v+"px":"",e.transform="",e))}function rn(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,o=r.adaptive,l=o===void 0?!0:o,u=r.roundOffsets,s=u===void 0?!0:u,p={placement:re(e.placement),variation:Ae(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Pt(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:s})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Pt(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const nn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:rn,data:{}};var et={passive:!0};function on(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,o=i===void 0?!0:i,l=n.resize,u=l===void 0?!0:l,s=q(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&p.forEach(function(f){f.addEventListener("scroll",r.update,et)}),u&&s.addEventListener("resize",r.update,et),function(){o&&p.forEach(function(f){f.removeEventListener("scroll",r.update,et)}),u&&s.removeEventListener("resize",r.update,et)}}const an={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:on,data:{}};var sn={left:"right",right:"left",bottom:"top",top:"bottom"};function rt(t){return t.replace(/left|right|bottom|top/g,function(e){return sn[e]})}var un={start:"end",end:"start"};function jt(t){return t.replace(/start|end/g,function(e){return un[e]})}function St(t){var e=q(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function Ct(t){return De(fe(t)).left+St(t).scrollLeft}function cn(t,e){var r=q(t),n=fe(t),i=r.visualViewport,o=n.clientWidth,l=n.clientHeight,u=0,s=0;if(i){o=i.width,l=i.height;var p=er();(p||!p&&e==="fixed")&&(u=i.offsetLeft,s=i.offsetTop)}return{width:o,height:l,x:u+Ct(t),y:s}}function ln(t){var e,r=fe(t),n=St(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=ge(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=ge(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-n.scrollLeft+Ct(t),s=-n.scrollTop;return ue(i||r).direction==="rtl"&&(u+=ge(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:l,x:u,y:s}}function Tt(t){var e=ue(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function or(t){return["html","body","#document"].indexOf(ne(t))>=0?t.ownerDocument.body:X(t)&&Tt(t)?t:or(ot(t))}function Ie(t,e){var r;e===void 0&&(e=[]);var n=or(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),o=q(n),l=i?[o].concat(o.visualViewport||[],Tt(n)?n:[]):n,u=e.concat(l);return i?u:u.concat(Ie(ot(l)))}function mt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function fn(t,e){var r=De(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function Ht(t,e,r){return e===Jt?mt(cn(t,r)):ye(e)?fn(e,r):mt(ln(fe(t)))}function dn(t){var e=Ie(ot(t)),r=["absolute","fixed"].indexOf(ue(t).position)>=0,n=r&&X(t)?We(t):t;return ye(n)?e.filter(function(i){return ye(i)&&tr(i,n)&&ne(i)!=="body"}):[]}function pn(t,e,r,n){var i=e==="clippingParents"?dn(t):[].concat(e),o=[].concat(i,[r]),l=o[0],u=o.reduce(function(s,p){var f=Ht(t,p,n);return s.top=ge(f.top,s.top),s.right=nt(f.right,s.right),s.bottom=nt(f.bottom,s.bottom),s.left=ge(f.left,s.left),s},Ht(t,l,n));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function ar(t){var e=t.reference,r=t.element,n=t.placement,i=n?re(n):null,o=n?Ae(n):null,l=e.x+e.width/2-r.width/2,u=e.y+e.height/2-r.height/2,s;switch(i){case W:s={x:l,y:e.y-r.height};break;case Y:s={x:l,y:e.y+e.height};break;case K:s={x:e.x+e.width,y:u};break;case k:s={x:e.x-r.width,y:u};break;default:s={x:e.x,y:e.y}}var p=i?xt(i):null;if(p!=null){var f=p==="y"?"height":"width";switch(o){case Ce:s[p]=s[p]-(e[f]/2-r[f]/2);break;case Ve:s[p]=s[p]+(e[f]/2-r[f]/2);break}}return s}function _e(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,o=r.strategy,l=o===void 0?t.strategy:o,u=r.boundary,s=u===void 0?Pr:u,p=r.rootBoundary,f=p===void 0?Jt:p,h=r.elementContext,y=h===void 0?je:h,v=r.altBoundary,b=v===void 0?!1:v,g=r.padding,w=g===void 0?0:g,S=nr(typeof w!="number"?w:ir(w,$e)),T=y===je?jr:je,D=t.rects.popper,a=t.elements[b?T:y],O=pn(ye(a)?a:a.contextElement||fe(t.elements.popper),s,f,l),d=De(t.elements.reference),x=ar({reference:d,element:D,placement:i}),M=mt(Object.assign({},D,x)),P=y===je?M:d,L={top:O.top-P.top+S.top,bottom:P.bottom-O.bottom+S.bottom,left:O.left-P.left+S.left,right:P.right-O.right+S.right},j=t.modifiersData.offset;if(y===je&&j){var B=j[i];Object.keys(L).forEach(function(R){var U=[K,Y].indexOf(R)>=0?1:-1,F=[W,Y].indexOf(R)>=0?"y":"x";L[R]+=B[F]*U})}return L}function vn(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,o=r.rootBoundary,l=r.padding,u=r.flipVariations,s=r.allowedAutoPlacements,p=s===void 0?Qt:s,f=Ae(n),h=f?u?Lt:Lt.filter(function(b){return Ae(b)===f}):$e,y=h.filter(function(b){return p.indexOf(b)>=0});y.length===0&&(y=h);var v=y.reduce(function(b,g){return b[g]=_e(t,{placement:g,boundary:i,rootBoundary:o,padding:l})[re(g)],b},{});return Object.keys(v).sort(function(b,g){return v[b]-v[g]})}function hn(t){if(re(t)===wt)return[];var e=rt(t);return[jt(t),e,jt(e)]}function mn(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,l=r.altAxis,u=l===void 0?!0:l,s=r.fallbackPlacements,p=r.padding,f=r.boundary,h=r.rootBoundary,y=r.altBoundary,v=r.flipVariations,b=v===void 0?!0:v,g=r.allowedAutoPlacements,w=e.options.placement,S=re(w),T=S===w,D=s||(T||!b?[rt(w)]:hn(w)),a=[w].concat(D).reduce(function(ie,G){return ie.concat(re(G)===wt?vn(e,{placement:G,boundary:f,rootBoundary:h,padding:p,flipVariations:b,allowedAutoPlacements:g}):G)},[]),O=e.rects.reference,d=e.rects.popper,x=new Map,M=!0,P=a[0],L=0;L<a.length;L++){var j=a[L],B=re(j),R=Ae(j)===Ce,U=[W,Y].indexOf(B)>=0,F=U?"width":"height",I=_e(e,{placement:j,boundary:f,rootBoundary:h,altBoundary:y,padding:p}),N=U?R?K:k:R?Y:W;O[F]>d[F]&&(N=rt(N));var H=rt(N),Q=[];if(o&&Q.push(I[B]<=0),u&&Q.push(I[N]<=0,I[H]<=0),Q.every(function(ie){return ie})){P=j,M=!1;break}x.set(j,Q)}if(M)for(var Z=b?3:1,de=function(G){var oe=a.find(function(be){var ae=x.get(be);if(ae)return ae.slice(0,G).every(function(we){return we})});if(oe)return P=oe,"break"},ee=Z;ee>0;ee--){var pe=de(ee);if(pe==="break")break}e.placement!==P&&(e.modifiersData[n]._skip=!0,e.placement=P,e.reset=!0)}}const gn={name:"flip",enabled:!0,phase:"main",fn:mn,requiresIfExists:["offset"],data:{_skip:!1}};function It(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function Nt(t){return[W,K,Y,k].some(function(e){return t[e]>=0})}function yn(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,l=_e(e,{elementContext:"reference"}),u=_e(e,{altBoundary:!0}),s=It(l,n),p=It(u,i,o),f=Nt(s),h=Nt(p);e.modifiersData[r]={referenceClippingOffsets:s,popperEscapeOffsets:p,isReferenceHidden:f,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":h})}const bn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:yn};function wn(t,e,r){var n=re(t),i=[k,W].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,l=o[0],u=o[1];return l=l||0,u=(u||0)*i,[k,K].indexOf(n)>=0?{x:u,y:l}:{x:l,y:u}}function En(t){var e=t.state,r=t.options,n=t.name,i=r.offset,o=i===void 0?[0,0]:i,l=Qt.reduce(function(f,h){return f[h]=wn(h,e.rects,o),f},{}),u=l[e.placement],s=u.x,p=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=s,e.modifiersData.popperOffsets.y+=p),e.modifiersData[n]=l}const On={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:En};function xn(t){var e=t.state,r=t.name;e.modifiersData[r]=ar({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Sn={name:"popperOffsets",enabled:!0,phase:"read",fn:xn,data:{}};function Cn(t){return t==="x"?"y":"x"}function Tn(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,o=i===void 0?!0:i,l=r.altAxis,u=l===void 0?!1:l,s=r.boundary,p=r.rootBoundary,f=r.altBoundary,h=r.padding,y=r.tether,v=y===void 0?!0:y,b=r.tetherOffset,g=b===void 0?0:b,w=_e(e,{boundary:s,rootBoundary:p,padding:h,altBoundary:f}),S=re(e.placement),T=Ae(e.placement),D=!T,a=xt(S),O=Cn(a),d=e.modifiersData.popperOffsets,x=e.rects.reference,M=e.rects.popper,P=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,L=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),j=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,B={x:0,y:0};if(d){if(o){var R,U=a==="y"?W:k,F=a==="y"?Y:K,I=a==="y"?"height":"width",N=d[a],H=N+w[U],Q=N-w[F],Z=v?-M[I]/2:0,de=T===Ce?x[I]:M[I],ee=T===Ce?-M[I]:-x[I],pe=e.elements.arrow,ie=v&&pe?Ot(pe):{width:0,height:0},G=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:rr(),oe=G[U],be=G[F],ae=He(0,x[I],ie[I]),we=D?x[I]/2-Z-ae-oe-L.mainAxis:de-ae-oe-L.mainAxis,ce=D?-x[I]/2+Z+ae+be+L.mainAxis:ee+ae+be+L.mainAxis,Ee=e.elements.arrow&&We(e.elements.arrow),Ue=Ee?a==="y"?Ee.clientTop||0:Ee.clientLeft||0:0,Re=(R=j==null?void 0:j[a])!=null?R:0,Fe=N+we-Re-Ue,qe=N+ce-Re,Me=He(v?nt(H,Fe):H,N,v?ge(Q,qe):Q);d[a]=Me,B[a]=Me-N}if(u){var Le,ze=a==="x"?W:k,Xe=a==="x"?Y:K,se=d[O],le=O==="y"?"height":"width",Be=se+w[ze],ve=se-w[Xe],Pe=[W,k].indexOf(S)!==-1,Ye=(Le=j==null?void 0:j[O])!=null?Le:0,Ke=Pe?Be:se-x[le]-M[le]-Ye+L.altAxis,Ge=Pe?se+x[le]+M[le]-Ye-L.altAxis:ve,Je=v&&Pe?Kr(Ke,se,Ge):He(v?Ke:Be,se,v?Ge:ve);d[O]=Je,B[O]=Je-se}e.modifiersData[n]=B}}const Dn={name:"preventOverflow",enabled:!0,phase:"main",fn:Tn,requiresIfExists:["offset"]};function An(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Rn(t){return t===q(t)||!X(t)?St(t):An(t)}function Mn(t){var e=t.getBoundingClientRect(),r=Te(e.width)/t.offsetWidth||1,n=Te(e.height)/t.offsetHeight||1;return r!==1||n!==1}function Ln(t,e,r){r===void 0&&(r=!1);var n=X(e),i=X(e)&&Mn(e),o=fe(e),l=De(t,i,r),u={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(n||!n&&!r)&&((ne(e)!=="body"||Tt(o))&&(u=Rn(e)),X(e)?(s=De(e,!0),s.x+=e.clientLeft,s.y+=e.clientTop):o&&(s.x=Ct(o))),{x:l.left+u.scrollLeft-s.x,y:l.top+u.scrollTop-s.y,width:l.width,height:l.height}}function Bn(t){var e=new Map,r=new Set,n=[];t.forEach(function(o){e.set(o.name,o)});function i(o){r.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(u){if(!r.has(u)){var s=e.get(u);s&&i(s)}}),n.push(o)}return t.forEach(function(o){r.has(o.name)||i(o)}),n}function Pn(t){var e=Bn(t);return Fr.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function jn(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function Hn(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var Vt={placement:"bottom",modifiers:[],strategy:"absolute"};function _t(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function In(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,o=i===void 0?Vt:i;return function(u,s,p){p===void 0&&(p=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vt,o),modifiersData:{},elements:{reference:u,popper:s},attributes:{},styles:{}},h=[],y=!1,v={state:f,setOptions:function(S){var T=typeof S=="function"?S(f.options):S;g(),f.options=Object.assign({},o,f.options,T),f.scrollParents={reference:ye(u)?Ie(u):u.contextElement?Ie(u.contextElement):[],popper:Ie(s)};var D=Pn(Hn([].concat(n,f.options.modifiers)));return f.orderedModifiers=D.filter(function(a){return a.enabled}),b(),v.update()},forceUpdate:function(){if(!y){var S=f.elements,T=S.reference,D=S.popper;if(_t(T,D)){f.rects={reference:Ln(T,We(D),f.options.strategy==="fixed"),popper:Ot(D)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(L){return f.modifiersData[L.name]=Object.assign({},L.data)});for(var a=0;a<f.orderedModifiers.length;a++){if(f.reset===!0){f.reset=!1,a=-1;continue}var O=f.orderedModifiers[a],d=O.fn,x=O.options,M=x===void 0?{}:x,P=O.name;typeof d=="function"&&(f=d({state:f,options:M,name:P,instance:v})||f)}}}},update:jn(function(){return new Promise(function(w){v.forceUpdate(),w(f)})}),destroy:function(){g(),y=!0}};if(!_t(u,s))return v;v.setOptions(p).then(function(w){!y&&p.onFirstUpdate&&p.onFirstUpdate(w)});function b(){f.orderedModifiers.forEach(function(w){var S=w.name,T=w.options,D=T===void 0?{}:T,a=w.effect;if(typeof a=="function"){var O=a({state:f,name:S,instance:v,options:D}),d=function(){};h.push(O||d)}})}function g(){h.forEach(function(w){return w()}),h=[]}return v}}var Nn=[an,Sn,nn,Zt,On,gn,Dn,Zr,bn],Vn=In({defaultModifiers:Nn}),_n="tippy-box",sr="tippy-content",$n="tippy-backdrop",ur="tippy-arrow",cr="tippy-svg-arrow",me={passive:!0,capture:!0},lr=function(){return document.body};function ct(t,e,r){if(Array.isArray(t)){var n=t[e];return n??(Array.isArray(r)?r[e]:r)}return t}function Dt(t,e){var r={}.toString.call(t);return r.indexOf("[object")===0&&r.indexOf(e+"]")>-1}function fr(t,e){return typeof t=="function"?t.apply(void 0,e):t}function $t(t,e){if(e===0)return t;var r;return function(n){clearTimeout(r),r=setTimeout(function(){t(n)},e)}}function Wn(t){return t.split(/\s+/).filter(Boolean)}function Se(t){return[].concat(t)}function Wt(t,e){t.indexOf(e)===-1&&t.push(e)}function kn(t){return t.filter(function(e,r){return t.indexOf(e)===r})}function Un(t){return t.split("-")[0]}function it(t){return[].slice.call(t)}function kt(t){return Object.keys(t).reduce(function(e,r){return t[r]!==void 0&&(e[r]=t[r]),e},{})}function Ne(){return document.createElement("div")}function at(t){return["Element","Fragment"].some(function(e){return Dt(t,e)})}function Fn(t){return Dt(t,"NodeList")}function qn(t){return Dt(t,"MouseEvent")}function zn(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Xn(t){return at(t)?[t]:Fn(t)?it(t):Array.isArray(t)?t:it(document.querySelectorAll(t))}function lt(t,e){t.forEach(function(r){r&&(r.style.transitionDuration=e+"ms")})}function Ut(t,e){t.forEach(function(r){r&&r.setAttribute("data-state",e)})}function Yn(t){var e,r=Se(t),n=r[0];return n!=null&&(e=n.ownerDocument)!=null&&e.body?n.ownerDocument:document}function Kn(t,e){var r=e.clientX,n=e.clientY;return t.every(function(i){var o=i.popperRect,l=i.popperState,u=i.props,s=u.interactiveBorder,p=Un(l.placement),f=l.modifiersData.offset;if(!f)return!0;var h=p==="bottom"?f.top.y:0,y=p==="top"?f.bottom.y:0,v=p==="right"?f.left.x:0,b=p==="left"?f.right.x:0,g=o.top-n+h>s,w=n-o.bottom-y>s,S=o.left-r+v>s,T=r-o.right-b>s;return g||w||S||T})}function ft(t,e,r){var n=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[n](i,r)})}function Ft(t,e){for(var r=e;r;){var n;if(t.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var te={isTouch:!1},qt=0;function Gn(){te.isTouch||(te.isTouch=!0,window.performance&&document.addEventListener("mousemove",dr))}function dr(){var t=performance.now();t-qt<20&&(te.isTouch=!1,document.removeEventListener("mousemove",dr)),qt=t}function Jn(){var t=document.activeElement;if(zn(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Qn(){document.addEventListener("touchstart",Gn,me),window.addEventListener("blur",Jn)}var Zn=typeof window<"u"&&typeof document<"u",ei=Zn?!!window.msCrypto:!1,ti={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},ri={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},J=Object.assign({appendTo:lr,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},ti,ri),ni=Object.keys(J),ii=function(e){var r=Object.keys(e);r.forEach(function(n){J[n]=e[n]})};function pr(t){var e=t.plugins||[],r=e.reduce(function(n,i){var o=i.name,l=i.defaultValue;if(o){var u;n[o]=t[o]!==void 0?t[o]:(u=J[o])!=null?u:l}return n},{});return Object.assign({},t,r)}function oi(t,e){var r=e?Object.keys(pr(Object.assign({},J,{plugins:e}))):ni,n=r.reduce(function(i,o){var l=(t.getAttribute("data-tippy-"+o)||"").trim();if(!l)return i;if(o==="content")i[o]=l;else try{i[o]=JSON.parse(l)}catch{i[o]=l}return i},{});return n}function zt(t,e){var r=Object.assign({},e,{content:fr(e.content,[t])},e.ignoreAttributes?{}:oi(t,e.plugins));return r.aria=Object.assign({},J.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?e.interactive:r.aria.expanded,content:r.aria.content==="auto"?e.interactive?null:"describedby":r.aria.content},r}var ai=function(){return"innerHTML"};function gt(t,e){t[ai()]=e}function Xt(t){var e=Ne();return t===!0?e.className=ur:(e.className=cr,at(t)?e.appendChild(t):gt(e,t)),e}function Yt(t,e){at(e.content)?(gt(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?gt(t,e.content):t.textContent=e.content)}function yt(t){var e=t.firstElementChild,r=it(e.children);return{box:e,content:r.find(function(n){return n.classList.contains(sr)}),arrow:r.find(function(n){return n.classList.contains(ur)||n.classList.contains(cr)}),backdrop:r.find(function(n){return n.classList.contains($n)})}}function vr(t){var e=Ne(),r=Ne();r.className=_n,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=Ne();n.className=sr,n.setAttribute("data-state","hidden"),Yt(n,t.props),e.appendChild(r),r.appendChild(n),i(t.props,t.props);function i(o,l){var u=yt(e),s=u.box,p=u.content,f=u.arrow;l.theme?s.setAttribute("data-theme",l.theme):s.removeAttribute("data-theme"),typeof l.animation=="string"?s.setAttribute("data-animation",l.animation):s.removeAttribute("data-animation"),l.inertia?s.setAttribute("data-inertia",""):s.removeAttribute("data-inertia"),s.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?s.setAttribute("role",l.role):s.removeAttribute("role"),(o.content!==l.content||o.allowHTML!==l.allowHTML)&&Yt(p,t.props),l.arrow?f?o.arrow!==l.arrow&&(s.removeChild(f),s.appendChild(Xt(l.arrow))):s.appendChild(Xt(l.arrow)):f&&s.removeChild(f)}return{popper:e,onUpdate:i}}vr.$$tippy=!0;var si=1,tt=[],dt=[];function ui(t,e){var r=zt(t,Object.assign({},J,pr(kt(e)))),n,i,o,l=!1,u=!1,s=!1,p=!1,f,h,y,v=[],b=$t(Fe,r.interactiveDebounce),g,w=si++,S=null,T=kn(r.plugins),D={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},a={id:w,reference:t,popper:Ne(),popperInstance:S,props:r,state:D,plugins:T,clearDelayTimeouts:Ke,setProps:Ge,setContent:Je,show:br,hide:wr,hideWithInteractivity:Er,enable:Pe,disable:Ye,unmount:Or,destroy:xr};if(!r.render)return a;var O=r.render(a),d=O.popper,x=O.onUpdate;d.setAttribute("data-tippy-root",""),d.id="tippy-"+a.id,a.popper=d,t._tippy=a,d._tippy=a;var M=T.map(function(c){return c.fn(a)}),P=t.hasAttribute("aria-expanded");return Ee(),Z(),N(),H("onCreate",[a]),r.showOnCreate&&Be(),d.addEventListener("mouseenter",function(){a.props.interactive&&a.state.isVisible&&a.clearDelayTimeouts()}),d.addEventListener("mouseleave",function(){a.props.interactive&&a.props.trigger.indexOf("mouseenter")>=0&&U().addEventListener("mousemove",b)}),a;function L(){var c=a.props.touch;return Array.isArray(c)?c:[c,0]}function j(){return L()[0]==="hold"}function B(){var c;return!!((c=a.props.render)!=null&&c.$$tippy)}function R(){return g||t}function U(){var c=R().parentNode;return c?Yn(c):document}function F(){return yt(d)}function I(c){return a.state.isMounted&&!a.state.isVisible||te.isTouch||f&&f.type==="focus"?0:ct(a.props.delay,c?0:1,J.delay)}function N(c){c===void 0&&(c=!1),d.style.pointerEvents=a.props.interactive&&!c?"":"none",d.style.zIndex=""+a.props.zIndex}function H(c,m,E){if(E===void 0&&(E=!0),M.forEach(function(C){C[c]&&C[c].apply(C,m)}),E){var A;(A=a.props)[c].apply(A,m)}}function Q(){var c=a.props.aria;if(c.content){var m="aria-"+c.content,E=d.id,A=Se(a.props.triggerTarget||t);A.forEach(function(C){var _=C.getAttribute(m);if(a.state.isVisible)C.setAttribute(m,_?_+" "+E:E);else{var z=_&&_.replace(E,"").trim();z?C.setAttribute(m,z):C.removeAttribute(m)}})}}function Z(){if(!(P||!a.props.aria.expanded)){var c=Se(a.props.triggerTarget||t);c.forEach(function(m){a.props.interactive?m.setAttribute("aria-expanded",a.state.isVisible&&m===R()?"true":"false"):m.removeAttribute("aria-expanded")})}}function de(){U().removeEventListener("mousemove",b),tt=tt.filter(function(c){return c!==b})}function ee(c){if(!(te.isTouch&&(s||c.type==="mousedown"))){var m=c.composedPath&&c.composedPath()[0]||c.target;if(!(a.props.interactive&&Ft(d,m))){if(Se(a.props.triggerTarget||t).some(function(E){return Ft(E,m)})){if(te.isTouch||a.state.isVisible&&a.props.trigger.indexOf("click")>=0)return}else H("onClickOutside",[a,c]);a.props.hideOnClick===!0&&(a.clearDelayTimeouts(),a.hide(),u=!0,setTimeout(function(){u=!1}),a.state.isMounted||oe())}}}function pe(){s=!0}function ie(){s=!1}function G(){var c=U();c.addEventListener("mousedown",ee,!0),c.addEventListener("touchend",ee,me),c.addEventListener("touchstart",ie,me),c.addEventListener("touchmove",pe,me)}function oe(){var c=U();c.removeEventListener("mousedown",ee,!0),c.removeEventListener("touchend",ee,me),c.removeEventListener("touchstart",ie,me),c.removeEventListener("touchmove",pe,me)}function be(c,m){we(c,function(){!a.state.isVisible&&d.parentNode&&d.parentNode.contains(d)&&m()})}function ae(c,m){we(c,m)}function we(c,m){var E=F().box;function A(C){C.target===E&&(ft(E,"remove",A),m())}if(c===0)return m();ft(E,"remove",h),ft(E,"add",A),h=A}function ce(c,m,E){E===void 0&&(E=!1);var A=Se(a.props.triggerTarget||t);A.forEach(function(C){C.addEventListener(c,m,E),v.push({node:C,eventType:c,handler:m,options:E})})}function Ee(){j()&&(ce("touchstart",Re,{passive:!0}),ce("touchend",qe,{passive:!0})),Wn(a.props.trigger).forEach(function(c){if(c!=="manual")switch(ce(c,Re),c){case"mouseenter":ce("mouseleave",qe);break;case"focus":ce(ei?"focusout":"blur",Me);break;case"focusin":ce("focusout",Me);break}})}function Ue(){v.forEach(function(c){var m=c.node,E=c.eventType,A=c.handler,C=c.options;m.removeEventListener(E,A,C)}),v=[]}function Re(c){var m,E=!1;if(!(!a.state.isEnabled||Le(c)||u)){var A=((m=f)==null?void 0:m.type)==="focus";f=c,g=c.currentTarget,Z(),!a.state.isVisible&&qn(c)&&tt.forEach(function(C){return C(c)}),c.type==="click"&&(a.props.trigger.indexOf("mouseenter")<0||l)&&a.props.hideOnClick!==!1&&a.state.isVisible?E=!0:Be(c),c.type==="click"&&(l=!E),E&&!A&&ve(c)}}function Fe(c){var m=c.target,E=R().contains(m)||d.contains(m);if(!(c.type==="mousemove"&&E)){var A=le().concat(d).map(function(C){var _,z=C._tippy,Oe=(_=z.popperInstance)==null?void 0:_.state;return Oe?{popperRect:C.getBoundingClientRect(),popperState:Oe,props:r}:null}).filter(Boolean);Kn(A,c)&&(de(),ve(c))}}function qe(c){var m=Le(c)||a.props.trigger.indexOf("click")>=0&&l;if(!m){if(a.props.interactive){a.hideWithInteractivity(c);return}ve(c)}}function Me(c){a.props.trigger.indexOf("focusin")<0&&c.target!==R()||a.props.interactive&&c.relatedTarget&&d.contains(c.relatedTarget)||ve(c)}function Le(c){return te.isTouch?j()!==c.type.indexOf("touch")>=0:!1}function ze(){Xe();var c=a.props,m=c.popperOptions,E=c.placement,A=c.offset,C=c.getReferenceClientRect,_=c.moveTransition,z=B()?yt(d).arrow:null,Oe=C?{getBoundingClientRect:C,contextElement:C.contextElement||R()}:t,Mt={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Qe){var xe=Qe.state;if(B()){var Sr=F(),ut=Sr.box;["placement","reference-hidden","escaped"].forEach(function(Ze){Ze==="placement"?ut.setAttribute("data-placement",xe.placement):xe.attributes.popper["data-popper-"+Ze]?ut.setAttribute("data-"+Ze,""):ut.removeAttribute("data-"+Ze)}),xe.attributes.popper={}}}},he=[{name:"offset",options:{offset:A}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!_}},Mt];B()&&z&&he.push({name:"arrow",options:{element:z,padding:3}}),he.push.apply(he,(m==null?void 0:m.modifiers)||[]),a.popperInstance=Vn(Oe,d,Object.assign({},m,{placement:E,onFirstUpdate:y,modifiers:he}))}function Xe(){a.popperInstance&&(a.popperInstance.destroy(),a.popperInstance=null)}function se(){var c=a.props.appendTo,m,E=R();a.props.interactive&&c===lr||c==="parent"?m=E.parentNode:m=fr(c,[E]),m.contains(d)||m.appendChild(d),a.state.isMounted=!0,ze()}function le(){return it(d.querySelectorAll("[data-tippy-root]"))}function Be(c){a.clearDelayTimeouts(),c&&H("onTrigger",[a,c]),G();var m=I(!0),E=L(),A=E[0],C=E[1];te.isTouch&&A==="hold"&&C&&(m=C),m?n=setTimeout(function(){a.show()},m):a.show()}function ve(c){if(a.clearDelayTimeouts(),H("onUntrigger",[a,c]),!a.state.isVisible){oe();return}if(!(a.props.trigger.indexOf("mouseenter")>=0&&a.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(c.type)>=0&&l)){var m=I(!1);m?i=setTimeout(function(){a.state.isVisible&&a.hide()},m):o=requestAnimationFrame(function(){a.hide()})}}function Pe(){a.state.isEnabled=!0}function Ye(){a.hide(),a.state.isEnabled=!1}function Ke(){clearTimeout(n),clearTimeout(i),cancelAnimationFrame(o)}function Ge(c){if(!a.state.isDestroyed){H("onBeforeUpdate",[a,c]),Ue();var m=a.props,E=zt(t,Object.assign({},m,kt(c),{ignoreAttributes:!0}));a.props=E,Ee(),m.interactiveDebounce!==E.interactiveDebounce&&(de(),b=$t(Fe,E.interactiveDebounce)),m.triggerTarget&&!E.triggerTarget?Se(m.triggerTarget).forEach(function(A){A.removeAttribute("aria-expanded")}):E.triggerTarget&&t.removeAttribute("aria-expanded"),Z(),N(),x&&x(m,E),a.popperInstance&&(ze(),le().forEach(function(A){requestAnimationFrame(A._tippy.popperInstance.forceUpdate)})),H("onAfterUpdate",[a,c])}}function Je(c){a.setProps({content:c})}function br(){var c=a.state.isVisible,m=a.state.isDestroyed,E=!a.state.isEnabled,A=te.isTouch&&!a.props.touch,C=ct(a.props.duration,0,J.duration);if(!(c||m||E||A)&&!R().hasAttribute("disabled")&&(H("onShow",[a],!1),a.props.onShow(a)!==!1)){if(a.state.isVisible=!0,B()&&(d.style.visibility="visible"),N(),G(),a.state.isMounted||(d.style.transition="none"),B()){var _=F(),z=_.box,Oe=_.content;lt([z,Oe],0)}y=function(){var he;if(!(!a.state.isVisible||p)){if(p=!0,d.offsetHeight,d.style.transition=a.props.moveTransition,B()&&a.props.animation){var st=F(),Qe=st.box,xe=st.content;lt([Qe,xe],C),Ut([Qe,xe],"visible")}Q(),Z(),Wt(dt,a),(he=a.popperInstance)==null||he.forceUpdate(),H("onMount",[a]),a.props.animation&&B()&&ae(C,function(){a.state.isShown=!0,H("onShown",[a])})}},se()}}function wr(){var c=!a.state.isVisible,m=a.state.isDestroyed,E=!a.state.isEnabled,A=ct(a.props.duration,1,J.duration);if(!(c||m||E)&&(H("onHide",[a],!1),a.props.onHide(a)!==!1)){if(a.state.isVisible=!1,a.state.isShown=!1,p=!1,l=!1,B()&&(d.style.visibility="hidden"),de(),oe(),N(!0),B()){var C=F(),_=C.box,z=C.content;a.props.animation&&(lt([_,z],A),Ut([_,z],"hidden"))}Q(),Z(),a.props.animation?B()&&be(A,a.unmount):a.unmount()}}function Er(c){U().addEventListener("mousemove",b),Wt(tt,b),b(c)}function Or(){a.state.isVisible&&a.hide(),a.state.isMounted&&(Xe(),le().forEach(function(c){c._tippy.unmount()}),d.parentNode&&d.parentNode.removeChild(d),dt=dt.filter(function(c){return c!==a}),a.state.isMounted=!1,H("onHidden",[a]))}function xr(){a.state.isDestroyed||(a.clearDelayTimeouts(),a.unmount(),Ue(),delete t._tippy,a.state.isDestroyed=!0,H("onDestroy",[a]))}}function ke(t,e){e===void 0&&(e={});var r=J.plugins.concat(e.plugins||[]);Qn();var n=Object.assign({},e,{plugins:r}),i=Xn(t),o=i.reduce(function(l,u){var s=u&&ui(u,n);return s&&l.push(s),l},[]);return at(t)?o[0]:o}ke.defaultProps=J;ke.setDefaultProps=ii;ke.currentInput=te;Object.assign({},Zt,{effect:function(e){var r=e.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});ke.setDefaultProps({render:vr});class ci{constructor({editor:e,element:r,view:n,tippyOptions:i={},updateDelay:o=250,shouldShow:l}){this.preventHide=!1,this.shouldShow=({view:u,state:s,from:p,to:f})=>{const{doc:h,selection:y}=s,{empty:v}=y,b=!h.textBetween(p,f).length&&Dr(s.selection),g=this.element.contains(document.activeElement);return!(!(u.hasFocus()||g)||v||b||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var s;if(this.preventHide){this.preventHide=!1;return}u!=null&&u.relatedTarget&&(!((s=this.element.parentNode)===null||s===void 0)&&s.contains(u.relatedTarget))||(u==null?void 0:u.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=u=>{this.blurHandler({event:u})},this.handleDebouncedUpdate=(u,s)=>{const p=!(s!=null&&s.selection.eq(u.state.selection)),f=!(s!=null&&s.doc.eq(u.state.doc));!p&&!f||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(u,p,f,s)},this.updateDelay))},this.updateHandler=(u,s,p,f)=>{var h,y,v;const{state:b,composing:g}=u,{selection:w}=b;if(g||!s&&!p)return;this.createTooltip();const{ranges:T}=w,D=Math.min(...T.map(d=>d.$from.pos)),a=Math.max(...T.map(d=>d.$to.pos));if(!((h=this.shouldShow)===null||h===void 0?void 0:h.call(this,{editor:this.editor,element:this.element,view:u,state:b,oldState:f,from:D,to:a}))){this.hide();return}(y=this.tippy)===null||y===void 0||y.setProps({getReferenceClientRect:((v=this.tippyOptions)===null||v===void 0?void 0:v.getReferenceClientRect)||(()=>{if(Ar(b.selection)){let d=u.nodeDOM(D);if(d){const x=d.dataset.nodeViewWrapper?d:d.querySelector("[data-node-view-wrapper]");if(x&&(d=x.firstChild),d)return d.getBoundingClientRect()}}return Rr(u,D,a)})}),this.show()},this.editor=e,this.element=r,this.view=n,this.updateDelay=o,l&&(this.shouldShow=l),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,r=!!e.parentElement;this.tippy||!r||(this.tippy=ke(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,r){const{state:n}=e,i=n.selection.from!==n.selection.to;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,r);return}const o=!(r!=null&&r.selection.eq(e.state.selection)),l=!(r!=null&&r.doc.eq(e.state.doc));this.updateHandler(e,o,l,r)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,r;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(r=this.tippy)===null||r===void 0||r.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const hr=t=>new Cr({key:typeof t.pluginKey=="string"?new Tr(t.pluginKey):t.pluginKey,view:e=>new ci({view:e,...t})});Mr.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[hr({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function li(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mr={exports:{}},pt={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kt;function fi(){if(Kt)return pt;Kt=1;var t=V;function e(h,y){return h===y&&(h!==0||1/h===1/y)||h!==h&&y!==y}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function u(h,y){var v=y(),b=n({inst:{value:v,getSnapshot:y}}),g=b[0].inst,w=b[1];return o(function(){g.value=v,g.getSnapshot=y,s(g)&&w({inst:g})},[h,v,y]),i(function(){return s(g)&&w({inst:g}),h(function(){s(g)&&w({inst:g})})},[h]),l(v),v}function s(h){var y=h.getSnapshot;h=h.value;try{var v=y();return!r(h,v)}catch{return!0}}function p(h,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return pt.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,pt}mr.exports=fi();var At=mr.exports;const di=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},pi=({contentComponent:t})=>{const e=At.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return V.createElement(V.Fragment,null,Object.values(e))};function vi(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:Br.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}class hi extends V.Component{constructor(e){var r;super(e),this.editorContentRef=V.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((r=e.editor)===null||r===void 0)&&r.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.options.element.childNodes),e.setOptions({element:r}),e.contentComponent=vi(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const r=document.createElement("div");r.append(...e.options.element.childNodes),e.setOptions({element:r})}render(){const{editor:e,innerRef:r,...n}=this.props;return V.createElement(V.Fragment,null,V.createElement("div",{ref:di(r,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&V.createElement(pi,{contentComponent:e.contentComponent}))}}const mi=$.forwardRef((t,e)=>{const r=V.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return V.createElement(hi,{key:r,innerRef:e,...t})}),Li=V.memo(mi);var gi=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(i of e.entries())if(!r.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],r.get(i[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(i of e.entries())if(!r.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(e[i]!==r[i])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var l=o[i];if(!(l==="_owner"&&e.$$typeof)&&!t(e[l],r[l]))return!1}return!0}return e!==e&&r!==r},yi=li(gi),gr={exports:{}},vt={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gt;function bi(){if(Gt)return vt;Gt=1;var t=V,e=At;function r(p,f){return p===f&&(p!==0||1/p===1/f)||p!==p&&f!==f}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,u=t.useMemo,s=t.useDebugValue;return vt.useSyncExternalStoreWithSelector=function(p,f,h,y,v){var b=o(null);if(b.current===null){var g={hasValue:!1,value:null};b.current=g}else g=b.current;b=u(function(){function S(d){if(!T){if(T=!0,D=d,d=y(d),v!==void 0&&g.hasValue){var x=g.value;if(v(x,d))return a=x}return a=d}if(x=a,n(D,d))return x;var M=y(d);return v!==void 0&&v(x,M)?x:(D=d,a=M)}var T=!1,D,a,O=h===void 0?null:h;return[function(){return S(f())},O===null?void 0:function(){return S(O())}]},[f,h,y,v]);var w=i(p,b[0],b[1]);return l(function(){g.hasValue=!0,g.value=w},[w]),s(w),w},vt}gr.exports=bi();var wi=gr.exports;const Ei=typeof window<"u"?$.useLayoutEffect:$.useEffect;class Oi{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const r=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},n=this.editor;return n.on("transaction",r),()=>{n.off("transaction",r)}}}}function xi(t){var e;const[r]=$.useState(()=>new Oi(t.editor)),n=wi.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:yi);return Ei(()=>r.watch(t.editor),[t.editor,r]),$.useDebugValue(n),n}const Si=!1,bt=typeof window>"u",Ci=bt||!!(typeof window<"u"&&window.next);class Rt{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?bt||Ci?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(i,...n)},onBlur:(...n)=>{var i,o;return(o=(i=this.options.current).onBlur)===null||o===void 0?void 0:o.call(i,...n)},onCreate:(...n)=>{var i,o;return(o=(i=this.options.current).onCreate)===null||o===void 0?void 0:o.call(i,...n)},onDestroy:(...n)=>{var i,o;return(o=(i=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(i,...n)},onFocus:(...n)=>{var i,o;return(o=(i=this.options.current).onFocus)===null||o===void 0?void 0:o.call(i,...n)},onSelectionUpdate:(...n)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(i,...n)},onTransaction:(...n)=>{var i,o;return(o=(i=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(i,...n)},onUpdate:(...n)=>{var i,o;return(o=(i=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(i,...n)},onContentError:(...n)=>{var i,o;return(o=(i=this.options.current).onContentError)===null||o===void 0?void 0:o.call(i,...n)},onDrop:(...n)=>{var i,o;return(o=(i=this.options.current).onDrop)===null||o===void 0?void 0:o.call(i,...n)},onPaste:(...n)=>{var i,o;return(o=(i=this.options.current).onPaste)===null||o===void 0?void 0:o.call(i,...n)}};return new Lr(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,o)=>{var l;return i===((l=r.extensions)===null||l===void 0?void 0:l[o])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Rt.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function Bi(t={},e=[]){const r=$.useRef(t);r.current=t;const[n]=$.useState(()=>new Rt(r)),i=At.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return $.useDebugValue(i),$.useEffect(n.onRender(e)),xi({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&o===0?0:o+1}),i}const yr=$.createContext({editor:null});yr.Consumer;const Ti=()=>$.useContext(yr),Pi=t=>{const[e,r]=$.useState(null),{editor:n}=Ti();return $.useEffect(()=>{var i;if(!e||!((i=t.editor)===null||i===void 0)&&i.isDestroyed||n!=null&&n.isDestroyed)return;const{pluginKey:o="bubbleMenu",editor:l,tippyOptions:u={},updateDelay:s,shouldShow:p=null}=t,f=l||n;if(!f){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const h=hr({updateDelay:s,editor:f,element:e,pluginKey:o,shouldShow:p,tippyOptions:u});return f.registerPlugin(h),()=>{f.unregisterPlugin(o)}},[t.editor,n,e]),V.createElement("div",{ref:r,className:t.className,style:{visibility:"hidden"}},t.children)},Di=$.createContext({onDragStart:void 0}),Ai=()=>$.useContext(Di);V.forwardRef((t,e)=>{const{onDragStart:r}=Ai(),n=t.as||"div";return V.createElement(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});export{Pi as B,Li as E,Bi as u};
