import{R as Z,r as X,j as W,u as Lo,a as wr,b as Ro,c as jo}from"./index-DHhNN1TW.js";import{P as xr,a as Er,i as No,b as Po,p as Bo,E as kr,c as Io,R as Wo,S as Uo,L as Ho,T as Or}from"./TLDrawComponent-DaWWx42y.js";var ut="top",mt="bottom",bt="right",ft="left",xn="auto",ye=[ut,mt,bt,ft],Jt="start",be="end",Vo="clippingParents",Cr="viewport",de="popper",zo="reference",Un=ye.reduce(function(t,e){return t.concat([e+"-"+Jt,e+"-"+be])},[]),Sr=[].concat(ye,[xn]).reduce(function(t,e){return t.concat([e,e+"-"+Jt,e+"-"+be])},[]),qo="beforeRead",Fo="read",Yo="afterRead",Xo="beforeMain",Go="main",Ko="afterMain",Zo="beforeWrite",Jo="write",Qo="afterWrite",ti=[qo,Fo,Yo,Xo,Go,Ko,Zo,Jo,Qo];function St(t){return t?(t.nodeName||"").toLowerCase():null}function lt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function qt(t){var e=lt(t).Element;return t instanceof e||t instanceof Element}function pt(t){var e=lt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function En(t){if(typeof ShadowRoot>"u")return!1;var e=lt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function ei(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},o=e.attributes[n]||{},i=e.elements[n];!pt(i)||!St(i)||(Object.assign(i.style,r),Object.keys(o).forEach(function(a){var s=o[a];s===!1?i.removeAttribute(a):i.setAttribute(a,s===!0?"":s)}))})}function ni(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],i=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=a.reduce(function(c,f){return c[f]="",c},{});!pt(o)||!St(o)||(Object.assign(o.style,s),Object.keys(i).forEach(function(c){o.removeAttribute(c)}))})}}const _r={name:"applyStyles",enabled:!0,phase:"write",fn:ei,effect:ni,requires:["computeStyles"]};function Ot(t){return t.split("-")[0]}var Vt=Math.max,Ie=Math.min,Qt=Math.round;function pn(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Tr(){return!/^((?!chrome|android).)*safari/i.test(pn())}function te(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),o=1,i=1;e&&pt(t)&&(o=t.offsetWidth>0&&Qt(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&Qt(r.height)/t.offsetHeight||1);var a=qt(t)?lt(t):window,s=a.visualViewport,c=!Tr()&&n,f=(r.left+(c&&s?s.offsetLeft:0))/o,u=(r.top+(c&&s?s.offsetTop:0))/i,d=r.width/o,p=r.height/i;return{width:d,height:p,top:u,right:f+d,bottom:u+p,left:f,x:f,y:u}}function kn(t){var e=te(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Ar(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&En(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Lt(t){return lt(t).getComputedStyle(t)}function ri(t){return["table","td","th"].indexOf(St(t))>=0}function Nt(t){return((qt(t)?t.ownerDocument:t.document)||window.document).documentElement}function ze(t){return St(t)==="html"?t:t.assignedSlot||t.parentNode||(En(t)?t.host:null)||Nt(t)}function Hn(t){return!pt(t)||Lt(t).position==="fixed"?null:t.offsetParent}function oi(t){var e=/firefox/i.test(pn()),n=/Trident/i.test(pn());if(n&&pt(t)){var r=Lt(t);if(r.position==="fixed")return null}var o=ze(t);for(En(o)&&(o=o.host);pt(o)&&["html","body"].indexOf(St(o))<0;){var i=Lt(o);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return o;o=o.parentNode}return null}function we(t){for(var e=lt(t),n=Hn(t);n&&ri(n)&&Lt(n).position==="static";)n=Hn(n);return n&&(St(n)==="html"||St(n)==="body"&&Lt(n).position==="static")?e:n||oi(t)||e}function On(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function pe(t,e,n){return Vt(t,Ie(e,n))}function ii(t,e,n){var r=pe(t,e,n);return r>n?n:r}function Dr(){return{top:0,right:0,bottom:0,left:0}}function Mr(t){return Object.assign({},Dr(),t)}function $r(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var si=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Mr(typeof e!="number"?e:$r(e,ye))};function ai(t){var e,n=t.state,r=t.name,o=t.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Ot(n.placement),c=On(s),f=[ft,bt].indexOf(s)>=0,u=f?"height":"width";if(!(!i||!a)){var d=si(o.padding,n),p=kn(i),m=c==="y"?ut:ft,v=c==="y"?mt:bt,w=n.rects.reference[u]+n.rects.reference[c]-a[c]-n.rects.popper[u],y=a[c]-n.rects.reference[c],x=we(i),T=x?c==="y"?x.clientHeight||0:x.clientWidth||0:0,D=w/2-y/2,l=d[m],S=T-p[u]-d[v],h=T/2-p[u]/2+D,b=pe(l,h,S),O=c;n.modifiersData[r]=(e={},e[O]=b,e.centerOffset=b-h,e)}}function ci(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||Ar(e.elements.popper,o)&&(e.elements.arrow=o))}const ui={name:"arrow",enabled:!0,phase:"main",fn:ai,effect:ci,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ee(t){return t.split("-")[1]}var fi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function li(t,e){var n=t.x,r=t.y,o=e.devicePixelRatio||1;return{x:Qt(n*o)/o||0,y:Qt(r*o)/o||0}}function Vn(t){var e,n=t.popper,r=t.popperRect,o=t.placement,i=t.variation,a=t.offsets,s=t.position,c=t.gpuAcceleration,f=t.adaptive,u=t.roundOffsets,d=t.isFixed,p=a.x,m=p===void 0?0:p,v=a.y,w=v===void 0?0:v,y=typeof u=="function"?u({x:m,y:w}):{x:m,y:w};m=y.x,w=y.y;var x=a.hasOwnProperty("x"),T=a.hasOwnProperty("y"),D=ft,l=ut,S=window;if(f){var h=we(n),b="clientHeight",O="clientWidth";if(h===lt(n)&&(h=Nt(n),Lt(h).position!=="static"&&s==="absolute"&&(b="scrollHeight",O="scrollWidth")),h=h,o===ut||(o===ft||o===bt)&&i===be){l=mt;var k=d&&h===S&&S.visualViewport?S.visualViewport.height:h[b];w-=k-r.height,w*=c?1:-1}if(o===ft||(o===ut||o===mt)&&i===be){D=bt;var C=d&&h===S&&S.visualViewport?S.visualViewport.width:h[O];m-=C-r.width,m*=c?1:-1}}var A=Object.assign({position:s},f&&fi),_=u===!0?li({x:m,y:w},lt(n)):{x:m,y:w};if(m=_.x,w=_.y,c){var $;return Object.assign({},A,($={},$[l]=T?"0":"",$[D]=x?"0":"",$.transform=(S.devicePixelRatio||1)<=1?"translate("+m+"px, "+w+"px)":"translate3d("+m+"px, "+w+"px, 0)",$))}return Object.assign({},A,(e={},e[l]=T?w+"px":"",e[D]=x?m+"px":"",e.transform="",e))}function di(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,i=n.adaptive,a=i===void 0?!0:i,s=n.roundOffsets,c=s===void 0?!0:s,f={placement:Ot(e.placement),variation:ee(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Vn(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Vn(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const pi={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:di,data:{}};var $e={passive:!0};function hi(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,i=o===void 0?!0:o,a=r.resize,s=a===void 0?!0:a,c=lt(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&f.forEach(function(u){u.addEventListener("scroll",n.update,$e)}),s&&c.addEventListener("resize",n.update,$e),function(){i&&f.forEach(function(u){u.removeEventListener("scroll",n.update,$e)}),s&&c.removeEventListener("resize",n.update,$e)}}const mi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:hi,data:{}};var bi={left:"right",right:"left",bottom:"top",top:"bottom"};function Be(t){return t.replace(/left|right|bottom|top/g,function(e){return bi[e]})}var vi={start:"end",end:"start"};function zn(t){return t.replace(/start|end/g,function(e){return vi[e]})}function Cn(t){var e=lt(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Sn(t){return te(Nt(t)).left+Cn(t).scrollLeft}function gi(t,e){var n=lt(t),r=Nt(t),o=n.visualViewport,i=r.clientWidth,a=r.clientHeight,s=0,c=0;if(o){i=o.width,a=o.height;var f=Tr();(f||!f&&e==="fixed")&&(s=o.offsetLeft,c=o.offsetTop)}return{width:i,height:a,x:s+Sn(t),y:c}}function yi(t){var e,n=Nt(t),r=Cn(t),o=(e=t.ownerDocument)==null?void 0:e.body,i=Vt(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=Vt(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+Sn(t),c=-r.scrollTop;return Lt(o||n).direction==="rtl"&&(s+=Vt(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:c}}function _n(t){var e=Lt(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Lr(t){return["html","body","#document"].indexOf(St(t))>=0?t.ownerDocument.body:pt(t)&&_n(t)?t:Lr(ze(t))}function he(t,e){var n;e===void 0&&(e=[]);var r=Lr(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),i=lt(r),a=o?[i].concat(i.visualViewport||[],_n(r)?r:[]):r,s=e.concat(a);return o?s:s.concat(he(ze(a)))}function hn(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function wi(t,e){var n=te(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function qn(t,e,n){return e===Cr?hn(gi(t,n)):qt(e)?wi(e,n):hn(yi(Nt(t)))}function xi(t){var e=he(ze(t)),n=["absolute","fixed"].indexOf(Lt(t).position)>=0,r=n&&pt(t)?we(t):t;return qt(r)?e.filter(function(o){return qt(o)&&Ar(o,r)&&St(o)!=="body"}):[]}function Ei(t,e,n,r){var o=e==="clippingParents"?xi(t):[].concat(e),i=[].concat(o,[n]),a=i[0],s=i.reduce(function(c,f){var u=qn(t,f,r);return c.top=Vt(u.top,c.top),c.right=Ie(u.right,c.right),c.bottom=Ie(u.bottom,c.bottom),c.left=Vt(u.left,c.left),c},qn(t,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Rr(t){var e=t.reference,n=t.element,r=t.placement,o=r?Ot(r):null,i=r?ee(r):null,a=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,c;switch(o){case ut:c={x:a,y:e.y-n.height};break;case mt:c={x:a,y:e.y+e.height};break;case bt:c={x:e.x+e.width,y:s};break;case ft:c={x:e.x-n.width,y:s};break;default:c={x:e.x,y:e.y}}var f=o?On(o):null;if(f!=null){var u=f==="y"?"height":"width";switch(i){case Jt:c[f]=c[f]-(e[u]/2-n[u]/2);break;case be:c[f]=c[f]+(e[u]/2-n[u]/2);break}}return c}function ve(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,i=n.strategy,a=i===void 0?t.strategy:i,s=n.boundary,c=s===void 0?Vo:s,f=n.rootBoundary,u=f===void 0?Cr:f,d=n.elementContext,p=d===void 0?de:d,m=n.altBoundary,v=m===void 0?!1:m,w=n.padding,y=w===void 0?0:w,x=Mr(typeof y!="number"?y:$r(y,ye)),T=p===de?zo:de,D=t.rects.popper,l=t.elements[v?T:p],S=Ei(qt(l)?l:l.contextElement||Nt(t.elements.popper),c,u,a),h=te(t.elements.reference),b=Rr({reference:h,element:D,placement:o}),O=hn(Object.assign({},D,b)),k=p===de?O:h,C={top:S.top-k.top+x.top,bottom:k.bottom-S.bottom+x.bottom,left:S.left-k.left+x.left,right:k.right-S.right+x.right},A=t.modifiersData.offset;if(p===de&&A){var _=A[o];Object.keys(C).forEach(function($){var U=[bt,mt].indexOf($)>=0?1:-1,G=[ut,mt].indexOf($)>=0?"y":"x";C[$]+=_[G]*U})}return C}function ki(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,c=n.allowedAutoPlacements,f=c===void 0?Sr:c,u=ee(r),d=u?s?Un:Un.filter(function(v){return ee(v)===u}):ye,p=d.filter(function(v){return f.indexOf(v)>=0});p.length===0&&(p=d);var m=p.reduce(function(v,w){return v[w]=ve(t,{placement:w,boundary:o,rootBoundary:i,padding:a})[Ot(w)],v},{});return Object.keys(m).sort(function(v,w){return m[v]-m[w]})}function Oi(t){if(Ot(t)===xn)return[];var e=Be(t);return[zn(t),e,zn(e)]}function Ci(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,i=o===void 0?!0:o,a=n.altAxis,s=a===void 0?!0:a,c=n.fallbackPlacements,f=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,m=n.flipVariations,v=m===void 0?!0:m,w=n.allowedAutoPlacements,y=e.options.placement,x=Ot(y),T=x===y,D=c||(T||!v?[Be(y)]:Oi(y)),l=[y].concat(D).reduce(function(nt,rt){return nt.concat(Ot(rt)===xn?ki(e,{placement:rt,boundary:u,rootBoundary:d,padding:f,flipVariations:v,allowedAutoPlacements:w}):rt)},[]),S=e.rects.reference,h=e.rects.popper,b=new Map,O=!0,k=l[0],C=0;C<l.length;C++){var A=l[C],_=Ot(A),$=ee(A)===Jt,U=[ut,mt].indexOf(_)>=0,G=U?"width":"height",H=ve(e,{placement:A,boundary:u,rootBoundary:d,altBoundary:p,padding:f}),F=U?$?bt:ft:$?mt:ut;S[G]>h[G]&&(F=Be(F));var V=Be(F),K=[];if(i&&K.push(H[_]<=0),s&&K.push(H[F]<=0,H[V]<=0),K.every(function(nt){return nt})){k=A,O=!1;break}b.set(A,K)}if(O)for(var J=v?3:1,Q=function(rt){var it=l.find(function(z){var B=b.get(z);if(B)return B.slice(0,rt).every(function(Et){return Et})});if(it)return k=it,"break"},ot=J;ot>0;ot--){var Y=Q(ot);if(Y==="break")break}e.placement!==k&&(e.modifiersData[r]._skip=!0,e.placement=k,e.reset=!0)}}const Si={name:"flip",enabled:!0,phase:"main",fn:Ci,requiresIfExists:["offset"],data:{_skip:!1}};function Fn(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Yn(t){return[ut,bt,mt,ft].some(function(e){return t[e]>=0})}function _i(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,i=e.modifiersData.preventOverflow,a=ve(e,{elementContext:"reference"}),s=ve(e,{altBoundary:!0}),c=Fn(a,r),f=Fn(s,o,i),u=Yn(c),d=Yn(f);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:f,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const Ti={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:_i};function Ai(t,e,n){var r=Ot(t),o=[ft,ut].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[ft,bt].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function Di(t){var e=t.state,n=t.options,r=t.name,o=n.offset,i=o===void 0?[0,0]:o,a=Sr.reduce(function(u,d){return u[d]=Ai(d,e.rects,i),u},{}),s=a[e.placement],c=s.x,f=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=f),e.modifiersData[r]=a}const Mi={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Di};function $i(t){var e=t.state,n=t.name;e.modifiersData[n]=Rr({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Li={name:"popperOffsets",enabled:!0,phase:"read",fn:$i,data:{}};function Ri(t){return t==="x"?"y":"x"}function ji(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,i=o===void 0?!0:o,a=n.altAxis,s=a===void 0?!1:a,c=n.boundary,f=n.rootBoundary,u=n.altBoundary,d=n.padding,p=n.tether,m=p===void 0?!0:p,v=n.tetherOffset,w=v===void 0?0:v,y=ve(e,{boundary:c,rootBoundary:f,padding:d,altBoundary:u}),x=Ot(e.placement),T=ee(e.placement),D=!T,l=On(x),S=Ri(l),h=e.modifiersData.popperOffsets,b=e.rects.reference,O=e.rects.popper,k=typeof w=="function"?w(Object.assign({},e.rects,{placement:e.placement})):w,C=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),A=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,_={x:0,y:0};if(h){if(i){var $,U=l==="y"?ut:ft,G=l==="y"?mt:bt,H=l==="y"?"height":"width",F=h[l],V=F+y[U],K=F-y[G],J=m?-O[H]/2:0,Q=T===Jt?b[H]:O[H],ot=T===Jt?-O[H]:-b[H],Y=e.elements.arrow,nt=m&&Y?kn(Y):{width:0,height:0},rt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Dr(),it=rt[U],z=rt[G],B=pe(0,b[H],nt[H]),Et=D?b[H]/2-J-B-it-C.mainAxis:Q-B-it-C.mainAxis,_t=D?-b[H]/2+J+B+z+C.mainAxis:ot+B+z+C.mainAxis,Rt=e.elements.arrow&&we(e.elements.arrow),gt=Rt?l==="y"?Rt.clientTop||0:Rt.clientLeft||0:0,It=($=A==null?void 0:A[l])!=null?$:0,Ee=F+Et-It-gt,ke=F+_t-It,ce=pe(m?Ie(V,Ee):V,F,m?Vt(K,ke):K);h[l]=ce,_[l]=ce-F}if(s){var ue,Oe=l==="x"?ut:ft,Ce=l==="x"?mt:bt,Tt=h[S],jt=S==="y"?"height":"width",fe=Tt+y[Oe],Wt=Tt-y[Ce],le=[ut,ft].indexOf(x)!==-1,Se=(ue=A==null?void 0:A[S])!=null?ue:0,_e=le?fe:Tt-b[jt]-O[jt]-Se+C.altAxis,Te=le?Tt+b[jt]+O[jt]-Se-C.altAxis:Wt,Ae=m&&le?ii(_e,Tt,Te):pe(m?_e:fe,Tt,m?Te:Wt);h[S]=Ae,_[S]=Ae-Tt}e.modifiersData[r]=_}}const Ni={name:"preventOverflow",enabled:!0,phase:"main",fn:ji,requiresIfExists:["offset"]};function Pi(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Bi(t){return t===lt(t)||!pt(t)?Cn(t):Pi(t)}function Ii(t){var e=t.getBoundingClientRect(),n=Qt(e.width)/t.offsetWidth||1,r=Qt(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Wi(t,e,n){n===void 0&&(n=!1);var r=pt(e),o=pt(e)&&Ii(e),i=Nt(e),a=te(t,o,n),s={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&((St(e)!=="body"||_n(i))&&(s=Bi(e)),pt(e)?(c=te(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):i&&(c.x=Sn(i))),{x:a.left+s.scrollLeft-c.x,y:a.top+s.scrollTop-c.y,width:a.width,height:a.height}}function Ui(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function o(i){n.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var c=e.get(s);c&&o(c)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||o(i)}),r}function Hi(t){var e=Ui(t);return ti.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function Vi(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function zi(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Xn={placement:"bottom",modifiers:[],strategy:"absolute"};function Gn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function qi(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,i=o===void 0?Xn:o;return function(s,c,f){f===void 0&&(f=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Xn,i),modifiersData:{},elements:{reference:s,popper:c},attributes:{},styles:{}},d=[],p=!1,m={state:u,setOptions:function(x){var T=typeof x=="function"?x(u.options):x;w(),u.options=Object.assign({},i,u.options,T),u.scrollParents={reference:qt(s)?he(s):s.contextElement?he(s.contextElement):[],popper:he(c)};var D=Hi(zi([].concat(r,u.options.modifiers)));return u.orderedModifiers=D.filter(function(l){return l.enabled}),v(),m.update()},forceUpdate:function(){if(!p){var x=u.elements,T=x.reference,D=x.popper;if(Gn(T,D)){u.rects={reference:Wi(T,we(D),u.options.strategy==="fixed"),popper:kn(D)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(C){return u.modifiersData[C.name]=Object.assign({},C.data)});for(var l=0;l<u.orderedModifiers.length;l++){if(u.reset===!0){u.reset=!1,l=-1;continue}var S=u.orderedModifiers[l],h=S.fn,b=S.options,O=b===void 0?{}:b,k=S.name;typeof h=="function"&&(u=h({state:u,options:O,name:k,instance:m})||u)}}}},update:Vi(function(){return new Promise(function(y){m.forceUpdate(),y(u)})}),destroy:function(){w(),p=!0}};if(!Gn(s,c))return m;m.setOptions(f).then(function(y){!p&&f.onFirstUpdate&&f.onFirstUpdate(y)});function v(){u.orderedModifiers.forEach(function(y){var x=y.name,T=y.options,D=T===void 0?{}:T,l=y.effect;if(typeof l=="function"){var S=l({state:u,name:x,instance:m,options:D}),h=function(){};d.push(S||h)}})}function w(){d.forEach(function(y){return y()}),d=[]}return m}}var Fi=[mi,Li,pi,_r,Mi,Si,Ni,ui,Ti],Yi=qi({defaultModifiers:Fi}),Xi="tippy-box",jr="tippy-content",Gi="tippy-backdrop",Nr="tippy-arrow",Pr="tippy-svg-arrow",Ht={passive:!0,capture:!0},Br=function(){return document.body};function Ke(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function Tn(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function Ir(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Kn(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function Ki(t){return t.split(/\s+/).filter(Boolean)}function Zt(t){return[].concat(t)}function Zn(t,e){t.indexOf(e)===-1&&t.push(e)}function Zi(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function Ji(t){return t.split("-")[0]}function We(t){return[].slice.call(t)}function Jn(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function me(){return document.createElement("div")}function qe(t){return["Element","Fragment"].some(function(e){return Tn(t,e)})}function Qi(t){return Tn(t,"NodeList")}function ts(t){return Tn(t,"MouseEvent")}function es(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function ns(t){return qe(t)?[t]:Qi(t)?We(t):Array.isArray(t)?t:We(document.querySelectorAll(t))}function Ze(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function Qn(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function rs(t){var e,n=Zt(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function os(t,e){var n=e.clientX,r=e.clientY;return t.every(function(o){var i=o.popperRect,a=o.popperState,s=o.props,c=s.interactiveBorder,f=Ji(a.placement),u=a.modifiersData.offset;if(!u)return!0;var d=f==="bottom"?u.top.y:0,p=f==="top"?u.bottom.y:0,m=f==="right"?u.left.x:0,v=f==="left"?u.right.x:0,w=i.top-r+d>c,y=r-i.bottom-p>c,x=i.left-n+m>c,T=n-i.right-v>c;return w||y||x||T})}function Je(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){t[r](o,n)})}function tr(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var kt={isTouch:!1},er=0;function is(){kt.isTouch||(kt.isTouch=!0,window.performance&&document.addEventListener("mousemove",Wr))}function Wr(){var t=performance.now();t-er<20&&(kt.isTouch=!1,document.removeEventListener("mousemove",Wr)),er=t}function ss(){var t=document.activeElement;if(es(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function as(){document.addEventListener("touchstart",is,Ht),window.addEventListener("blur",ss)}var cs=typeof window<"u"&&typeof document<"u",us=cs?!!window.msCrypto:!1,fs={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},ls={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},yt=Object.assign({appendTo:Br,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},fs,ls),ds=Object.keys(yt),ps=function(e){var n=Object.keys(e);n.forEach(function(r){yt[r]=e[r]})};function Ur(t){var e=t.plugins||[],n=e.reduce(function(r,o){var i=o.name,a=o.defaultValue;if(i){var s;r[i]=t[i]!==void 0?t[i]:(s=yt[i])!=null?s:a}return r},{});return Object.assign({},t,n)}function hs(t,e){var n=e?Object.keys(Ur(Object.assign({},yt,{plugins:e}))):ds,r=n.reduce(function(o,i){var a=(t.getAttribute("data-tippy-"+i)||"").trim();if(!a)return o;if(i==="content")o[i]=a;else try{o[i]=JSON.parse(a)}catch{o[i]=a}return o},{});return r}function nr(t,e){var n=Object.assign({},e,{content:Ir(e.content,[t])},e.ignoreAttributes?{}:hs(t,e.plugins));return n.aria=Object.assign({},yt.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var ms=function(){return"innerHTML"};function mn(t,e){t[ms()]=e}function rr(t){var e=me();return t===!0?e.className=Nr:(e.className=Pr,qe(t)?e.appendChild(t):mn(e,t)),e}function or(t,e){qe(e.content)?(mn(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?mn(t,e.content):t.textContent=e.content)}function bn(t){var e=t.firstElementChild,n=We(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(jr)}),arrow:n.find(function(r){return r.classList.contains(Nr)||r.classList.contains(Pr)}),backdrop:n.find(function(r){return r.classList.contains(Gi)})}}function Hr(t){var e=me(),n=me();n.className=Xi,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=me();r.className=jr,r.setAttribute("data-state","hidden"),or(r,t.props),e.appendChild(n),n.appendChild(r),o(t.props,t.props);function o(i,a){var s=bn(e),c=s.box,f=s.content,u=s.arrow;a.theme?c.setAttribute("data-theme",a.theme):c.removeAttribute("data-theme"),typeof a.animation=="string"?c.setAttribute("data-animation",a.animation):c.removeAttribute("data-animation"),a.inertia?c.setAttribute("data-inertia",""):c.removeAttribute("data-inertia"),c.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?c.setAttribute("role",a.role):c.removeAttribute("role"),(i.content!==a.content||i.allowHTML!==a.allowHTML)&&or(f,t.props),a.arrow?u?i.arrow!==a.arrow&&(c.removeChild(u),c.appendChild(rr(a.arrow))):c.appendChild(rr(a.arrow)):u&&c.removeChild(u)}return{popper:e,onUpdate:o}}Hr.$$tippy=!0;var bs=1,Le=[],Qe=[];function vs(t,e){var n=nr(t,Object.assign({},yt,Ur(Jn(e)))),r,o,i,a=!1,s=!1,c=!1,f=!1,u,d,p,m=[],v=Kn(Ee,n.interactiveDebounce),w,y=bs++,x=null,T=Zi(n.plugins),D={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},l={id:y,reference:t,popper:me(),popperInstance:x,props:n,state:D,plugins:T,clearDelayTimeouts:_e,setProps:Te,setContent:Ae,show:_o,hide:To,hideWithInteractivity:Ao,enable:le,disable:Se,unmount:Do,destroy:Mo};if(!n.render)return l;var S=n.render(l),h=S.popper,b=S.onUpdate;h.setAttribute("data-tippy-root",""),h.id="tippy-"+l.id,l.popper=h,t._tippy=l,h._tippy=l;var O=T.map(function(g){return g.fn(l)}),k=t.hasAttribute("aria-expanded");return Rt(),J(),F(),V("onCreate",[l]),n.showOnCreate&&fe(),h.addEventListener("mouseenter",function(){l.props.interactive&&l.state.isVisible&&l.clearDelayTimeouts()}),h.addEventListener("mouseleave",function(){l.props.interactive&&l.props.trigger.indexOf("mouseenter")>=0&&U().addEventListener("mousemove",v)}),l;function C(){var g=l.props.touch;return Array.isArray(g)?g:[g,0]}function A(){return C()[0]==="hold"}function _(){var g;return!!((g=l.props.render)!=null&&g.$$tippy)}function $(){return w||t}function U(){var g=$().parentNode;return g?rs(g):document}function G(){return bn(h)}function H(g){return l.state.isMounted&&!l.state.isVisible||kt.isTouch||u&&u.type==="focus"?0:Ke(l.props.delay,g?0:1,yt.delay)}function F(g){g===void 0&&(g=!1),h.style.pointerEvents=l.props.interactive&&!g?"":"none",h.style.zIndex=""+l.props.zIndex}function V(g,M,L){if(L===void 0&&(L=!0),O.forEach(function(I){I[g]&&I[g].apply(I,M)}),L){var q;(q=l.props)[g].apply(q,M)}}function K(){var g=l.props.aria;if(g.content){var M="aria-"+g.content,L=h.id,q=Zt(l.props.triggerTarget||t);q.forEach(function(I){var at=I.getAttribute(M);if(l.state.isVisible)I.setAttribute(M,at?at+" "+L:L);else{var dt=at&&at.replace(L,"").trim();dt?I.setAttribute(M,dt):I.removeAttribute(M)}})}}function J(){if(!(k||!l.props.aria.expanded)){var g=Zt(l.props.triggerTarget||t);g.forEach(function(M){l.props.interactive?M.setAttribute("aria-expanded",l.state.isVisible&&M===$()?"true":"false"):M.removeAttribute("aria-expanded")})}}function Q(){U().removeEventListener("mousemove",v),Le=Le.filter(function(g){return g!==v})}function ot(g){if(!(kt.isTouch&&(c||g.type==="mousedown"))){var M=g.composedPath&&g.composedPath()[0]||g.target;if(!(l.props.interactive&&tr(h,M))){if(Zt(l.props.triggerTarget||t).some(function(L){return tr(L,M)})){if(kt.isTouch||l.state.isVisible&&l.props.trigger.indexOf("click")>=0)return}else V("onClickOutside",[l,g]);l.props.hideOnClick===!0&&(l.clearDelayTimeouts(),l.hide(),s=!0,setTimeout(function(){s=!1}),l.state.isMounted||it())}}}function Y(){c=!0}function nt(){c=!1}function rt(){var g=U();g.addEventListener("mousedown",ot,!0),g.addEventListener("touchend",ot,Ht),g.addEventListener("touchstart",nt,Ht),g.addEventListener("touchmove",Y,Ht)}function it(){var g=U();g.removeEventListener("mousedown",ot,!0),g.removeEventListener("touchend",ot,Ht),g.removeEventListener("touchstart",nt,Ht),g.removeEventListener("touchmove",Y,Ht)}function z(g,M){Et(g,function(){!l.state.isVisible&&h.parentNode&&h.parentNode.contains(h)&&M()})}function B(g,M){Et(g,M)}function Et(g,M){var L=G().box;function q(I){I.target===L&&(Je(L,"remove",q),M())}if(g===0)return M();Je(L,"remove",d),Je(L,"add",q),d=q}function _t(g,M,L){L===void 0&&(L=!1);var q=Zt(l.props.triggerTarget||t);q.forEach(function(I){I.addEventListener(g,M,L),m.push({node:I,eventType:g,handler:M,options:L})})}function Rt(){A()&&(_t("touchstart",It,{passive:!0}),_t("touchend",ke,{passive:!0})),Ki(l.props.trigger).forEach(function(g){if(g!=="manual")switch(_t(g,It),g){case"mouseenter":_t("mouseleave",ke);break;case"focus":_t(us?"focusout":"blur",ce);break;case"focusin":_t("focusout",ce);break}})}function gt(){m.forEach(function(g){var M=g.node,L=g.eventType,q=g.handler,I=g.options;M.removeEventListener(L,q,I)}),m=[]}function It(g){var M,L=!1;if(!(!l.state.isEnabled||ue(g)||s)){var q=((M=u)==null?void 0:M.type)==="focus";u=g,w=g.currentTarget,J(),!l.state.isVisible&&ts(g)&&Le.forEach(function(I){return I(g)}),g.type==="click"&&(l.props.trigger.indexOf("mouseenter")<0||a)&&l.props.hideOnClick!==!1&&l.state.isVisible?L=!0:fe(g),g.type==="click"&&(a=!L),L&&!q&&Wt(g)}}function Ee(g){var M=g.target,L=$().contains(M)||h.contains(M);if(!(g.type==="mousemove"&&L)){var q=jt().concat(h).map(function(I){var at,dt=I._tippy,Ft=(at=dt.popperInstance)==null?void 0:at.state;return Ft?{popperRect:I.getBoundingClientRect(),popperState:Ft,props:n}:null}).filter(Boolean);os(q,g)&&(Q(),Wt(g))}}function ke(g){var M=ue(g)||l.props.trigger.indexOf("click")>=0&&a;if(!M){if(l.props.interactive){l.hideWithInteractivity(g);return}Wt(g)}}function ce(g){l.props.trigger.indexOf("focusin")<0&&g.target!==$()||l.props.interactive&&g.relatedTarget&&h.contains(g.relatedTarget)||Wt(g)}function ue(g){return kt.isTouch?A()!==g.type.indexOf("touch")>=0:!1}function Oe(){Ce();var g=l.props,M=g.popperOptions,L=g.placement,q=g.offset,I=g.getReferenceClientRect,at=g.moveTransition,dt=_()?bn(h).arrow:null,Ft=I?{getBoundingClientRect:I,contextElement:I.contextElement||$()}:t,Wn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(De){var Yt=De.state;if(_()){var $o=G(),Ge=$o.box;["placement","reference-hidden","escaped"].forEach(function(Me){Me==="placement"?Ge.setAttribute("data-placement",Yt.placement):Yt.attributes.popper["data-popper-"+Me]?Ge.setAttribute("data-"+Me,""):Ge.removeAttribute("data-"+Me)}),Yt.attributes.popper={}}}},Ut=[{name:"offset",options:{offset:q}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!at}},Wn];_()&&dt&&Ut.push({name:"arrow",options:{element:dt,padding:3}}),Ut.push.apply(Ut,(M==null?void 0:M.modifiers)||[]),l.popperInstance=Yi(Ft,h,Object.assign({},M,{placement:L,onFirstUpdate:p,modifiers:Ut}))}function Ce(){l.popperInstance&&(l.popperInstance.destroy(),l.popperInstance=null)}function Tt(){var g=l.props.appendTo,M,L=$();l.props.interactive&&g===Br||g==="parent"?M=L.parentNode:M=Ir(g,[L]),M.contains(h)||M.appendChild(h),l.state.isMounted=!0,Oe()}function jt(){return We(h.querySelectorAll("[data-tippy-root]"))}function fe(g){l.clearDelayTimeouts(),g&&V("onTrigger",[l,g]),rt();var M=H(!0),L=C(),q=L[0],I=L[1];kt.isTouch&&q==="hold"&&I&&(M=I),M?r=setTimeout(function(){l.show()},M):l.show()}function Wt(g){if(l.clearDelayTimeouts(),V("onUntrigger",[l,g]),!l.state.isVisible){it();return}if(!(l.props.trigger.indexOf("mouseenter")>=0&&l.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(g.type)>=0&&a)){var M=H(!1);M?o=setTimeout(function(){l.state.isVisible&&l.hide()},M):i=requestAnimationFrame(function(){l.hide()})}}function le(){l.state.isEnabled=!0}function Se(){l.hide(),l.state.isEnabled=!1}function _e(){clearTimeout(r),clearTimeout(o),cancelAnimationFrame(i)}function Te(g){if(!l.state.isDestroyed){V("onBeforeUpdate",[l,g]),gt();var M=l.props,L=nr(t,Object.assign({},M,Jn(g),{ignoreAttributes:!0}));l.props=L,Rt(),M.interactiveDebounce!==L.interactiveDebounce&&(Q(),v=Kn(Ee,L.interactiveDebounce)),M.triggerTarget&&!L.triggerTarget?Zt(M.triggerTarget).forEach(function(q){q.removeAttribute("aria-expanded")}):L.triggerTarget&&t.removeAttribute("aria-expanded"),J(),F(),b&&b(M,L),l.popperInstance&&(Oe(),jt().forEach(function(q){requestAnimationFrame(q._tippy.popperInstance.forceUpdate)})),V("onAfterUpdate",[l,g])}}function Ae(g){l.setProps({content:g})}function _o(){var g=l.state.isVisible,M=l.state.isDestroyed,L=!l.state.isEnabled,q=kt.isTouch&&!l.props.touch,I=Ke(l.props.duration,0,yt.duration);if(!(g||M||L||q)&&!$().hasAttribute("disabled")&&(V("onShow",[l],!1),l.props.onShow(l)!==!1)){if(l.state.isVisible=!0,_()&&(h.style.visibility="visible"),F(),rt(),l.state.isMounted||(h.style.transition="none"),_()){var at=G(),dt=at.box,Ft=at.content;Ze([dt,Ft],0)}p=function(){var Ut;if(!(!l.state.isVisible||f)){if(f=!0,h.offsetHeight,h.style.transition=l.props.moveTransition,_()&&l.props.animation){var Xe=G(),De=Xe.box,Yt=Xe.content;Ze([De,Yt],I),Qn([De,Yt],"visible")}K(),J(),Zn(Qe,l),(Ut=l.popperInstance)==null||Ut.forceUpdate(),V("onMount",[l]),l.props.animation&&_()&&B(I,function(){l.state.isShown=!0,V("onShown",[l])})}},Tt()}}function To(){var g=!l.state.isVisible,M=l.state.isDestroyed,L=!l.state.isEnabled,q=Ke(l.props.duration,1,yt.duration);if(!(g||M||L)&&(V("onHide",[l],!1),l.props.onHide(l)!==!1)){if(l.state.isVisible=!1,l.state.isShown=!1,f=!1,a=!1,_()&&(h.style.visibility="hidden"),Q(),it(),F(!0),_()){var I=G(),at=I.box,dt=I.content;l.props.animation&&(Ze([at,dt],q),Qn([at,dt],"hidden"))}K(),J(),l.props.animation?_()&&z(q,l.unmount):l.unmount()}}function Ao(g){U().addEventListener("mousemove",v),Zn(Le,v),v(g)}function Do(){l.state.isVisible&&l.hide(),l.state.isMounted&&(Ce(),jt().forEach(function(g){g._tippy.unmount()}),h.parentNode&&h.parentNode.removeChild(h),Qe=Qe.filter(function(g){return g!==l}),l.state.isMounted=!1,V("onHidden",[l]))}function Mo(){l.state.isDestroyed||(l.clearDelayTimeouts(),l.unmount(),gt(),delete t._tippy,l.state.isDestroyed=!0,V("onDestroy",[l]))}}function xe(t,e){e===void 0&&(e={});var n=yt.plugins.concat(e.plugins||[]);as();var r=Object.assign({},e,{plugins:n}),o=ns(t),i=o.reduce(function(a,s){var c=s&&vs(s,r);return c&&a.push(c),a},[]);return qe(t)?i[0]:i}xe.defaultProps=yt;xe.setDefaultProps=ps;xe.currentInput=kt;Object.assign({},_r,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});xe.setDefaultProps({render:Hr});class gs{constructor({editor:e,element:n,view:r,tippyOptions:o={},updateDelay:i=250,shouldShow:a}){this.preventHide=!1,this.shouldShow=({view:s,state:c,from:f,to:u})=>{const{doc:d,selection:p}=c,{empty:m}=p,v=!d.textBetween(f,u).length&&No(c.selection),w=this.element.contains(document.activeElement);return!(!(s.hasFocus()||w)||m||v||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:s})=>{var c;if(this.preventHide){this.preventHide=!1;return}s!=null&&s.relatedTarget&&(!((c=this.element.parentNode)===null||c===void 0)&&c.contains(s.relatedTarget))||(s==null?void 0:s.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=s=>{this.blurHandler({event:s})},this.handleDebouncedUpdate=(s,c)=>{const f=!(c!=null&&c.selection.eq(s.state.selection)),u=!(c!=null&&c.doc.eq(s.state.doc));!f&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(s,f,u,c)},this.updateDelay))},this.updateHandler=(s,c,f,u)=>{var d,p,m;const{state:v,composing:w}=s,{selection:y}=v;if(w||!c&&!f)return;this.createTooltip();const{ranges:T}=y,D=Math.min(...T.map(h=>h.$from.pos)),l=Math.max(...T.map(h=>h.$to.pos));if(!((d=this.shouldShow)===null||d===void 0?void 0:d.call(this,{editor:this.editor,element:this.element,view:s,state:v,oldState:u,from:D,to:l}))){this.hide();return}(p=this.tippy)===null||p===void 0||p.setProps({getReferenceClientRect:((m=this.tippyOptions)===null||m===void 0?void 0:m.getReferenceClientRect)||(()=>{if(Po(v.selection)){let h=s.nodeDOM(D);if(h){const b=h.dataset.nodeViewWrapper?h:h.querySelector("[data-node-view-wrapper]");if(b&&(h=b.firstChild),h)return h.getBoundingClientRect()}}return Bo(s,D,l)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=i,a&&(this.shouldShow=a),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=xe(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,o=r.selection.from!==r.selection.to;if(this.updateDelay>0&&o){this.handleDebouncedUpdate(e,n);return}const i=!(n!=null&&n.selection.eq(e.state.selection)),a=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,i,a,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Vr=t=>new xr({key:typeof t.pluginKey=="string"?new Er(t.pluginKey):t.pluginKey,view:e=>new gs({view:e,...t})});kr.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Vr({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function ys(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zr={exports:{}},tn={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ir;function ws(){if(ir)return tn;ir=1;var t=Z;function e(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,i=t.useLayoutEffect,a=t.useDebugValue;function s(d,p){var m=p(),v=r({inst:{value:m,getSnapshot:p}}),w=v[0].inst,y=v[1];return i(function(){w.value=m,w.getSnapshot=p,c(w)&&y({inst:w})},[d,m,p]),o(function(){return c(w)&&y({inst:w}),d(function(){c(w)&&y({inst:w})})},[d]),a(m),m}function c(d){var p=d.getSnapshot;d=d.value;try{var m=p();return!n(d,m)}catch{return!0}}function f(d,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:s;return tn.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,tn}zr.exports=ws();var An=zr.exports;const xs=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},Es=({contentComponent:t})=>{const e=An.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return Z.createElement(Z.Fragment,null,Object.values(e))};function ks(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Wo.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}class Os extends Z.Component{constructor(e){var n;super(e),this.editorContentRef=Z.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=ks(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Z.createElement(Z.Fragment,null,Z.createElement("div",{ref:xs(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Z.createElement(Es,{contentComponent:e.contentComponent}))}}const Cs=X.forwardRef((t,e)=>{const n=Z.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Z.createElement(Os,{key:n,innerRef:e,...t})}),Ss=Z.memo(Cs);var _s=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!t(e[o],n[o]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(o of e.entries())if(!n.has(o[0]))return!1;for(o of e.entries())if(!t(o[1],n.get(o[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(o of e.entries())if(!n.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(e[o]!==n[o])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;o--!==0;){var a=i[o];if(!(a==="_owner"&&e.$$typeof)&&!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n},Ts=ys(_s),qr={exports:{}},en={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sr;function As(){if(sr)return en;sr=1;var t=Z,e=An;function n(f,u){return f===u&&(f!==0||1/f===1/u)||f!==f&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,c=t.useDebugValue;return en.useSyncExternalStoreWithSelector=function(f,u,d,p,m){var v=i(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=s(function(){function x(h){if(!T){if(T=!0,D=h,h=p(h),m!==void 0&&w.hasValue){var b=w.value;if(m(b,h))return l=b}return l=h}if(b=l,r(D,h))return b;var O=p(h);return m!==void 0&&m(b,O)?b:(D=h,l=O)}var T=!1,D,l,S=d===void 0?null:d;return[function(){return x(u())},S===null?void 0:function(){return x(S())}]},[u,d,p,m]);var y=o(f,v[0],v[1]);return a(function(){w.hasValue=!0,w.value=y},[y]),c(y),y},en}qr.exports=As();var Ds=qr.exports;const Ms=typeof window<"u"?X.useLayoutEffect:X.useEffect;class $s{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function Ls(t){var e;const[n]=X.useState(()=>new $s(t.editor)),r=Ds.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:Ts);return Ms(()=>n.watch(t.editor),[t.editor,n]),X.useDebugValue(r),r}const Rs=!1,vn=typeof window>"u",js=vn||!!(typeof window<"u"&&window.next);class Dn{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?vn||js?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var o,i;return(i=(o=this.options.current).onBeforeCreate)===null||i===void 0?void 0:i.call(o,...r)},onBlur:(...r)=>{var o,i;return(i=(o=this.options.current).onBlur)===null||i===void 0?void 0:i.call(o,...r)},onCreate:(...r)=>{var o,i;return(i=(o=this.options.current).onCreate)===null||i===void 0?void 0:i.call(o,...r)},onDestroy:(...r)=>{var o,i;return(i=(o=this.options.current).onDestroy)===null||i===void 0?void 0:i.call(o,...r)},onFocus:(...r)=>{var o,i;return(i=(o=this.options.current).onFocus)===null||i===void 0?void 0:i.call(o,...r)},onSelectionUpdate:(...r)=>{var o,i;return(i=(o=this.options.current).onSelectionUpdate)===null||i===void 0?void 0:i.call(o,...r)},onTransaction:(...r)=>{var o,i;return(i=(o=this.options.current).onTransaction)===null||i===void 0?void 0:i.call(o,...r)},onUpdate:(...r)=>{var o,i;return(i=(o=this.options.current).onUpdate)===null||i===void 0?void 0:i.call(o,...r)},onContentError:(...r)=>{var o,i;return(i=(o=this.options.current).onContentError)===null||i===void 0?void 0:i.call(o,...r)},onDrop:(...r)=>{var o,i;return(i=(o=this.options.current).onDrop)===null||i===void 0?void 0:i.call(o,...r)},onPaste:(...r)=>{var o,i;return(i=(o=this.options.current).onPaste)===null||i===void 0?void 0:i.call(o,...r)}};return new Io(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((o,i)=>{var a;return o===((a=n.extensions)===null||a===void 0?void 0:a[i])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Dn.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,o)=>r===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function Ns(t={},e=[]){const n=X.useRef(t);n.current=t;const[r]=X.useState(()=>new Dn(n)),o=An.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return X.useDebugValue(o),X.useEffect(r.onRender(e)),Ls({editor:o,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&i===0?0:i+1}),o}const Fr=X.createContext({editor:null});Fr.Consumer;const Ps=()=>X.useContext(Fr),Bs=t=>{const[e,n]=X.useState(null),{editor:r}=Ps();return X.useEffect(()=>{var o;if(!e||!((o=t.editor)===null||o===void 0)&&o.isDestroyed||r!=null&&r.isDestroyed)return;const{pluginKey:i="bubbleMenu",editor:a,tippyOptions:s={},updateDelay:c,shouldShow:f=null}=t,u=a||r;if(!u){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const d=Vr({updateDelay:c,editor:u,element:e,pluginKey:i,shouldShow:f,tippyOptions:s});return u.registerPlugin(d),()=>{u.unregisterPlugin(i)}},[t.editor,r,e]),Z.createElement("div",{ref:n,className:t.className,style:{visibility:"hidden"}},t.children)},Is=X.createContext({onDragStart:void 0}),Ws=()=>X.useContext(Is);Z.forwardRef((t,e)=>{const{onDragStart:n}=Ws(),r=t.as||"div";return Z.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const Us=kr.create({name:"noWrapValidator",addOptions(){return{container:null,maxWidth:870}},addProseMirrorPlugins(){return[new xr({key:new Er("noWrapValidator"),filterTransaction:(t,e)=>{if(!t.docChanged)return!0;const n=this.options.container,r=n?document.querySelector(n):e.view.dom.parentElement;if(!r)return!0;const o=window.getComputedStyle(r),i=parseFloat(o.lineHeight),a=r.clientHeight,s=parseFloat(o.fontSize),c=Math.floor(a/i),f=r.getBoundingClientRect().width,u=t.doc;if(u.content.content.filter(w=>w.type.name==="paragraph").length>c)return!1;const m=document.createElement("canvas").getContext("2d");m.font=`${s}px ${o.fontFamily}`;let v=!0;return u.content.content.forEach(w=>{const y=w.textContent;m.measureText(y).width>f&&(v=!1)}),v}})]}}),Yr=({tiptap_id:t,pageId:e,className:n})=>{const[r,o]=X.useState("<p></p>");X.useEffect(()=>{(async()=>{try{const c=await fetch(`/api/planners/38e012ec-0ab2-4fbe-8e68-8a75e4716a35/pages/${e}/planner_entries?tiptap_id=${t}`);if(c.ok){const f=await c.json();Array.isArray(f)&&f.length>0?o(f[0].content):f.content&&o(f.content)}}catch{}})()},[e,t]);const i=Ns({editable:!0,content:r,onUpdate:({editor:s})=>{const c=s.getHTML();a(e,c,t)},extensions:[Uo.configure({hardBreak:!1}),Ho.configure({autolink:!0,defaultProtocol:"https",shouldAutoLink:s=>s.startsWith("www.")||s.startsWith("http://")||s.startsWith("https://")||s.endsWith(".com")||s.endsWith(".net")||s.endsWith(".org")||s.endsWith(".io")||s.endsWith(".dev")||s.endsWith(".app")||s.endsWith(".gov")||s.endsWith(".edu")||s.startsWith("slack:")||s.startsWith("git:")||s.startsWith("sms:")||s.startsWith("smsto:")||s.startsWith("mmsto:")||s.startsWith("skype:")||s.startsWith("callto:")||s.startsWith("webcal:")||s.startsWith("tel:")||s.startsWith("mailto:"),openOnClick:!0,protocols:["http","https","mailto","tel","slack","git","fax","modem","sms","smsto","mmsto","skype","callto","webcal"]}),Us.configure({container:`.${n}`,maxWidth:870})]});X.useEffect(()=>{i&&r&&i.commands.setContent(r)},[i,r]);const a=async(s,c,f)=>{try{(await fetch(`/api/planners/38e012ec-0ab2-4fbe-8e68-8a75e4716a35/pages/${s}/planner_entries`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:c,tiptap_id:f})})).ok}catch{}};return X.useEffect(()=>{if(!i)return;const s=()=>{const{state:c,view:f}=i;let u=c.tr;c.doc.descendants((d,p)=>{d.marks.forEach(m=>{if(m.type.name==="link"){const v=d.textContent;v&&(v.match(/^(https?:\/\/|www\.)/)||v.match(/\.(com|net|org|io|dev|app|gov|edu)$/i)||v.match(/^(slack:|git:|sms:|smsto:|mmsto:|skype:|callto:|webcal:|tel:|mailto:)/))||(u=u.removeMark(p,p+d.nodeSize,m))}})}),u.docChanged&&f.dispatch(u)};return i.on("transaction",s),()=>{i.off("transaction",s)}},[i]),W.jsxs("div",{className:n,children:[W.jsx(Ss,{editor:i}),i&&W.jsx(Bs,{editor:i,tippyOptions:{duration:100,placement:"top",offset:[0,10]},children:W.jsxs("div",{className:"bubble-menu",children:[W.jsx("button",{onClick:()=>i.chain().focus().toggleBold().run(),className:i.isActive("bold")?"is-active":"",children:"Bold"}),W.jsx("button",{onClick:()=>i.chain().focus().toggleItalic().run(),className:i.isActive("italic")?"is-active":"",children:"Italic"}),W.jsx("button",{onClick:()=>i.chain().focus().toggleStrike().run(),className:i.isActive("strike")?"is-active":"",children:"Strike"}),W.jsx("button",{onClick:()=>i.chain().focus().toggleLink({href:""}).run(),className:i.isActive("link")?"is-active":"",children:"Link"})]})})]})},{min:Hs,max:Vs}=Math,zt=(t,e=0,n=1)=>Hs(Vs(e,t),n),Mn=t=>{t._clipped=!1,t._unclipped=t.slice(0);for(let e=0;e<=3;e++)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]=zt(t[e],0,255)):e===3&&(t[e]=zt(t[e],0,1));return t},Xr={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])Xr[`[object ${t}]`]=t.toLowerCase();function P(t){return Xr[Object.prototype.toString.call(t)]||"object"}const j=(t,e=null)=>t.length>=3?Array.prototype.slice.call(t):P(t[0])=="object"&&e?e.split("").filter(n=>t[0][n]!==void 0).map(n=>t[0][n]):t[0].slice(0),oe=t=>{if(t.length<2)return null;const e=t.length-1;return P(t[e])=="string"?t[e].toLowerCase():null},{PI:Fe,min:Gr,max:Kr}=Math,ht=t=>Math.round(t*100)/100,gn=t=>Math.round(t*100)/100,Dt=Fe*2,nn=Fe/3,zs=Fe/180,qs=180/Fe;function Zr(t){return[...t.slice(0,3).reverse(),...t.slice(3)]}const R={format:{},autodetect:[]};class E{constructor(...e){const n=this;if(P(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let r=oe(e),o=!1;if(!r){o=!0,R.sorted||(R.autodetect=R.autodetect.sort((i,a)=>a.p-i.p),R.sorted=!0);for(let i of R.autodetect)if(r=i.test(...e),r)break}if(R.format[r]){const i=R.format[r].apply(null,o?e:e.slice(0,-1));n._rgb=Mn(i)}else throw new Error("unknown format: "+e);n._rgb.length===3&&n._rgb.push(1)}toString(){return P(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const Fs="3.1.2",N=(...t)=>new E(...t);N.version=Fs;const ne={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Ys=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Xs=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Jr=t=>{if(t.match(Ys)){(t.length===4||t.length===7)&&(t=t.substr(1)),t.length===3&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=parseInt(t,16),n=e>>16,r=e>>8&255,o=e&255;return[n,r,o,1]}if(t.match(Xs)){(t.length===5||t.length===9)&&(t=t.substr(1)),t.length===4&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16),n=e>>24&255,r=e>>16&255,o=e>>8&255,i=Math.round((e&255)/255*100)/100;return[n,r,o,i]}throw new Error(`unknown hex color: ${t}`)},{round:Re}=Math,Qr=(...t)=>{let[e,n,r,o]=j(t,"rgba"),i=oe(t)||"auto";o===void 0&&(o=1),i==="auto"&&(i=o<1?"rgba":"rgb"),e=Re(e),n=Re(n),r=Re(r);let s="000000"+(e<<16|n<<8|r).toString(16);s=s.substr(s.length-6);let c="0"+Re(o*255).toString(16);switch(c=c.substr(c.length-2),i.toLowerCase()){case"rgba":return`#${s}${c}`;case"argb":return`#${c}${s}`;default:return`#${s}`}};E.prototype.name=function(){const t=Qr(this._rgb,"rgb");for(let e of Object.keys(ne))if(ne[e]===t)return e.toLowerCase();return t};R.format.named=t=>{if(t=t.toLowerCase(),ne[t])return Jr(ne[t]);throw new Error("unknown color name: "+t)};R.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&P(t)==="string"&&ne[t.toLowerCase()])return"named"}});E.prototype.alpha=function(t,e=!1){return t!==void 0&&P(t)==="number"?e?(this._rgb[3]=t,this):new E([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]};E.prototype.clipped=function(){return this._rgb._clipped||!1};const Ct={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},Gs=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Mt(t){const e=Gs.get(String(t).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+t);Ct.labWhitePoint=t,Ct.Xn=e[0],Ct.Zn=e[1]}function ge(){return Ct.labWhitePoint}const $n=(...t)=>{t=j(t,"lab");const[e,n,r]=t,[o,i,a]=Ks(e,n,r),[s,c,f]=to(o,i,a);return[s,c,f,t.length>3?t[3]:1]},Ks=(t,e,n)=>{const{kE:r,kK:o,kKE:i,Xn:a,Yn:s,Zn:c}=Ct,f=(t+16)/116,u=.002*e+f,d=f-.005*n,p=u*u*u,m=d*d*d,v=p>r?p:(116*u-16)/o,w=t>i?Math.pow((t+16)/116,3):t/o,y=m>r?m:(116*d-16)/o,x=v*a,T=w*s,D=y*c;return[x,T,D]},rn=t=>{const e=Math.sign(t);return t=Math.abs(t),(t<=.0031308?t*12.92:1.055*Math.pow(t,1/2.4)-.055)*e},to=(t,e,n)=>{const{MtxAdaptMa:r,MtxAdaptMaI:o,MtxXYZ2RGB:i,RefWhiteRGB:a,Xn:s,Yn:c,Zn:f}=Ct,u=s*r.m00+c*r.m10+f*r.m20,d=s*r.m01+c*r.m11+f*r.m21,p=s*r.m02+c*r.m12+f*r.m22,m=a.X*r.m00+a.Y*r.m10+a.Z*r.m20,v=a.X*r.m01+a.Y*r.m11+a.Z*r.m21,w=a.X*r.m02+a.Y*r.m12+a.Z*r.m22,y=(t*r.m00+e*r.m10+n*r.m20)*(m/u),x=(t*r.m01+e*r.m11+n*r.m21)*(v/d),T=(t*r.m02+e*r.m12+n*r.m22)*(w/p),D=y*o.m00+x*o.m10+T*o.m20,l=y*o.m01+x*o.m11+T*o.m21,S=y*o.m02+x*o.m12+T*o.m22,h=rn(D*i.m00+l*i.m10+S*i.m20),b=rn(D*i.m01+l*i.m11+S*i.m21),O=rn(D*i.m02+l*i.m12+S*i.m22);return[h*255,b*255,O*255]},Ln=(...t)=>{const[e,n,r,...o]=j(t,"rgb"),[i,a,s]=eo(e,n,r),[c,f,u]=Zs(i,a,s);return[c,f,u,...o.length>0&&o[0]<1?[o[0]]:[]]};function Zs(t,e,n){const{Xn:r,Yn:o,Zn:i,kE:a,kK:s}=Ct,c=t/r,f=e/o,u=n/i,d=c>a?Math.pow(c,1/3):(s*c+16)/116,p=f>a?Math.pow(f,1/3):(s*f+16)/116,m=u>a?Math.pow(u,1/3):(s*u+16)/116;return[116*p-16,500*(d-p),200*(p-m)]}function on(t){const e=Math.sign(t);return t=Math.abs(t),(t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))*e}const eo=(t,e,n)=>{t=on(t/255),e=on(e/255),n=on(n/255);const{MtxRGB2XYZ:r,MtxAdaptMa:o,MtxAdaptMaI:i,Xn:a,Yn:s,Zn:c,As:f,Bs:u,Cs:d}=Ct;let p=t*r.m00+e*r.m10+n*r.m20,m=t*r.m01+e*r.m11+n*r.m21,v=t*r.m02+e*r.m12+n*r.m22;const w=a*o.m00+s*o.m10+c*o.m20,y=a*o.m01+s*o.m11+c*o.m21,x=a*o.m02+s*o.m12+c*o.m22;let T=p*o.m00+m*o.m10+v*o.m20,D=p*o.m01+m*o.m11+v*o.m21,l=p*o.m02+m*o.m12+v*o.m22;return T*=w/f,D*=y/u,l*=x/d,p=T*i.m00+D*i.m10+l*i.m20,m=T*i.m01+D*i.m11+l*i.m21,v=T*i.m02+D*i.m12+l*i.m22,[p,m,v]};E.prototype.lab=function(){return Ln(this._rgb)};const Js=(...t)=>new E(...t,"lab");Object.assign(N,{lab:Js,getLabWhitePoint:ge,setLabWhitePoint:Mt});R.format.lab=$n;R.autodetect.push({p:2,test:(...t)=>{if(t=j(t,"lab"),P(t)==="array"&&t.length===3)return"lab"}});E.prototype.darken=function(t=1){const e=this,n=e.lab();return n[0]-=Ct.Kn*t,new E(n,"lab").alpha(e.alpha(),!0)};E.prototype.brighten=function(t=1){return this.darken(-t)};E.prototype.darker=E.prototype.darken;E.prototype.brighter=E.prototype.brighten;E.prototype.get=function(t){const[e,n]=t.split("."),r=this[e]();if(n){const o=e.indexOf(n)-(e.substr(0,2)==="ok"?2:0);if(o>-1)return r[o];throw new Error(`unknown channel ${n} in mode ${e}`)}else return r};const{pow:Qs}=Math,ta=1e-7,ea=20;E.prototype.luminance=function(t,e="rgb"){if(t!==void 0&&P(t)==="number"){if(t===0)return new E([0,0,0,this._rgb[3]],"rgb");if(t===1)return new E([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),r=ea;const o=(a,s)=>{const c=a.interpolate(s,.5,e),f=c.luminance();return Math.abs(t-f)<ta||!r--?c:f>t?o(a,c):o(c,s)},i=(n>t?o(new E([0,0,0]),this):o(this,new E([255,255,255]))).rgb();return new E([...i,this._rgb[3]])}return na(...this._rgb.slice(0,3))};const na=(t,e,n)=>(t=sn(t),e=sn(e),n=sn(n),.2126*t+.7152*e+.0722*n),sn=t=>(t/=255,t<=.03928?t/12.92:Qs((t+.055)/1.055,2.4)),st={},re=(t,e,n=.5,...r)=>{let o=r[0]||"lrgb";if(!st[o]&&!r.length&&(o=Object.keys(st)[0]),!st[o])throw new Error(`interpolation mode ${o} is not defined`);return P(t)!=="object"&&(t=new E(t)),P(e)!=="object"&&(e=new E(e)),st[o](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))};E.prototype.mix=E.prototype.interpolate=function(t,e=.5,...n){return re(this,t,e,...n)};E.prototype.premultiply=function(t=!1){const e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new E([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};const{sin:ra,cos:oa}=Math,no=(...t)=>{let[e,n,r]=j(t,"lch");return isNaN(r)&&(r=0),r=r*zs,[e,oa(r)*n,ra(r)*n]},Rn=(...t)=>{t=j(t,"lch");const[e,n,r]=t,[o,i,a]=no(e,n,r),[s,c,f]=$n(o,i,a);return[s,c,f,t.length>3?t[3]:1]},ia=(...t)=>{const e=Zr(j(t,"hcl"));return Rn(...e)},{sqrt:sa,atan2:aa,round:ca}=Math,ro=(...t)=>{const[e,n,r]=j(t,"lab"),o=sa(n*n+r*r);let i=(aa(r,n)*qs+360)%360;return ca(o*1e4)===0&&(i=Number.NaN),[e,o,i]},jn=(...t)=>{const[e,n,r,...o]=j(t,"rgb"),[i,a,s]=Ln(e,n,r),[c,f,u]=ro(i,a,s);return[c,f,u,...o.length>0&&o[0]<1?[o[0]]:[]]};E.prototype.lch=function(){return jn(this._rgb)};E.prototype.hcl=function(){return Zr(jn(this._rgb))};const ua=(...t)=>new E(...t,"lch"),fa=(...t)=>new E(...t,"hcl");Object.assign(N,{lch:ua,hcl:fa});R.format.lch=Rn;R.format.hcl=ia;["lch","hcl"].forEach(t=>R.autodetect.push({p:2,test:(...e)=>{if(e=j(e,t),P(e)==="array"&&e.length===3)return t}}));E.prototype.saturate=function(t=1){const e=this,n=e.lch();return n[1]+=Ct.Kn*t,n[1]<0&&(n[1]=0),new E(n,"lch").alpha(e.alpha(),!0)};E.prototype.desaturate=function(t=1){return this.saturate(-t)};E.prototype.set=function(t,e,n=!1){const[r,o]=t.split("."),i=this[r]();if(o){const a=r.indexOf(o)-(r.substr(0,2)==="ok"?2:0);if(a>-1){if(P(e)=="string")switch(e.charAt(0)){case"+":i[a]+=+e;break;case"-":i[a]+=+e;break;case"*":i[a]*=+e.substr(1);break;case"/":i[a]/=+e.substr(1);break;default:i[a]=+e}else if(P(e)==="number")i[a]=e;else throw new Error("unsupported value for Color.set");const s=new E(i,r);return n?(this._rgb=s._rgb,this):s}throw new Error(`unknown channel ${o} in mode ${r}`)}else return i};E.prototype.tint=function(t=.5,...e){return re(this,"white",t,...e)};E.prototype.shade=function(t=.5,...e){return re(this,"black",t,...e)};const la=(t,e,n)=>{const r=t._rgb,o=e._rgb;return new E(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"rgb")};st.rgb=la;const{sqrt:an,pow:Xt}=Math,da=(t,e,n)=>{const[r,o,i]=t._rgb,[a,s,c]=e._rgb;return new E(an(Xt(r,2)*(1-n)+Xt(a,2)*n),an(Xt(o,2)*(1-n)+Xt(s,2)*n),an(Xt(i,2)*(1-n)+Xt(c,2)*n),"rgb")};st.lrgb=da;const pa=(t,e,n)=>{const r=t.lab(),o=e.lab();return new E(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"lab")};st.lab=pa;const ie=(t,e,n,r)=>{let o,i;r==="hsl"?(o=t.hsl(),i=e.hsl()):r==="hsv"?(o=t.hsv(),i=e.hsv()):r==="hcg"?(o=t.hcg(),i=e.hcg()):r==="hsi"?(o=t.hsi(),i=e.hsi()):r==="lch"||r==="hcl"?(r="hcl",o=t.hcl(),i=e.hcl()):r==="oklch"&&(o=t.oklch().reverse(),i=e.oklch().reverse());let a,s,c,f,u,d;(r.substr(0,1)==="h"||r==="oklch")&&([a,c,u]=o,[s,f,d]=i);let p,m,v,w;return!isNaN(a)&&!isNaN(s)?(s>a&&s-a>180?w=s-(a+360):s<a&&a-s>180?w=s+360-a:w=s-a,m=a+n*w):isNaN(a)?isNaN(s)?m=Number.NaN:(m=s,(u==1||u==0)&&r!="hsv"&&(p=f)):(m=a,(d==1||d==0)&&r!="hsv"&&(p=c)),p===void 0&&(p=c+n*(f-c)),v=u+n*(d-u),r==="oklch"?new E([v,p,m],r):new E([m,p,v],r)},oo=(t,e,n)=>ie(t,e,n,"lch");st.lch=oo;st.hcl=oo;const ha=t=>{if(P(t)=="number"&&t>=0&&t<=16777215){const e=t>>16,n=t>>8&255,r=t&255;return[e,n,r,1]}throw new Error("unknown num color: "+t)},ma=(...t)=>{const[e,n,r]=j(t,"rgb");return(e<<16)+(n<<8)+r};E.prototype.num=function(){return ma(this._rgb)};const ba=(...t)=>new E(...t,"num");Object.assign(N,{num:ba});R.format.num=ha;R.autodetect.push({p:5,test:(...t)=>{if(t.length===1&&P(t[0])==="number"&&t[0]>=0&&t[0]<=16777215)return"num"}});const va=(t,e,n)=>{const r=t.num(),o=e.num();return new E(r+n*(o-r),"num")};st.num=va;const{floor:ga}=Math,ya=(...t)=>{t=j(t,"hcg");let[e,n,r]=t,o,i,a;r=r*255;const s=n*255;if(n===0)o=i=a=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const c=ga(e),f=e-c,u=r*(1-n),d=u+s*(1-f),p=u+s*f,m=u+s;switch(c){case 0:[o,i,a]=[m,p,u];break;case 1:[o,i,a]=[d,m,u];break;case 2:[o,i,a]=[u,m,p];break;case 3:[o,i,a]=[u,d,m];break;case 4:[o,i,a]=[p,u,m];break;case 5:[o,i,a]=[m,u,d];break}}return[o,i,a,t.length>3?t[3]:1]},wa=(...t)=>{const[e,n,r]=j(t,"rgb"),o=Gr(e,n,r),i=Kr(e,n,r),a=i-o,s=a*100/255,c=o/(255-a)*100;let f;return a===0?f=Number.NaN:(e===i&&(f=(n-r)/a),n===i&&(f=2+(r-e)/a),r===i&&(f=4+(e-n)/a),f*=60,f<0&&(f+=360)),[f,s,c]};E.prototype.hcg=function(){return wa(this._rgb)};const xa=(...t)=>new E(...t,"hcg");N.hcg=xa;R.format.hcg=ya;R.autodetect.push({p:1,test:(...t)=>{if(t=j(t,"hcg"),P(t)==="array"&&t.length===3)return"hcg"}});const Ea=(t,e,n)=>ie(t,e,n,"hcg");st.hcg=Ea;const{cos:Gt}=Math,ka=(...t)=>{t=j(t,"hsi");let[e,n,r]=t,o,i,a;return isNaN(e)&&(e=0),isNaN(n)&&(n=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(a=(1-n)/3,o=(1+n*Gt(Dt*e)/Gt(nn-Dt*e))/3,i=1-(a+o)):e<2/3?(e-=1/3,o=(1-n)/3,i=(1+n*Gt(Dt*e)/Gt(nn-Dt*e))/3,a=1-(o+i)):(e-=2/3,i=(1-n)/3,a=(1+n*Gt(Dt*e)/Gt(nn-Dt*e))/3,o=1-(i+a)),o=zt(r*o*3),i=zt(r*i*3),a=zt(r*a*3),[o*255,i*255,a*255,t.length>3?t[3]:1]},{min:Oa,sqrt:Ca,acos:Sa}=Math,_a=(...t)=>{let[e,n,r]=j(t,"rgb");e/=255,n/=255,r/=255;let o;const i=Oa(e,n,r),a=(e+n+r)/3,s=a>0?1-i/a:0;return s===0?o=NaN:(o=(e-n+(e-r))/2,o/=Ca((e-n)*(e-n)+(e-r)*(n-r)),o=Sa(o),r>n&&(o=Dt-o),o/=Dt),[o*360,s,a]};E.prototype.hsi=function(){return _a(this._rgb)};const Ta=(...t)=>new E(...t,"hsi");N.hsi=Ta;R.format.hsi=ka;R.autodetect.push({p:2,test:(...t)=>{if(t=j(t,"hsi"),P(t)==="array"&&t.length===3)return"hsi"}});const Aa=(t,e,n)=>ie(t,e,n,"hsi");st.hsi=Aa;const yn=(...t)=>{t=j(t,"hsl");const[e,n,r]=t;let o,i,a;if(n===0)o=i=a=r*255;else{const s=[0,0,0],c=[0,0,0],f=r<.5?r*(1+n):r+n-r*n,u=2*r-f,d=e/360;s[0]=d+1/3,s[1]=d,s[2]=d-1/3;for(let p=0;p<3;p++)s[p]<0&&(s[p]+=1),s[p]>1&&(s[p]-=1),6*s[p]<1?c[p]=u+(f-u)*6*s[p]:2*s[p]<1?c[p]=f:3*s[p]<2?c[p]=u+(f-u)*(2/3-s[p])*6:c[p]=u;[o,i,a]=[c[0]*255,c[1]*255,c[2]*255]}return t.length>3?[o,i,a,t[3]]:[o,i,a,1]},io=(...t)=>{t=j(t,"rgba");let[e,n,r]=t;e/=255,n/=255,r/=255;const o=Gr(e,n,r),i=Kr(e,n,r),a=(i+o)/2;let s,c;return i===o?(s=0,c=Number.NaN):s=a<.5?(i-o)/(i+o):(i-o)/(2-i-o),e==i?c=(n-r)/(i-o):n==i?c=2+(r-e)/(i-o):r==i&&(c=4+(e-n)/(i-o)),c*=60,c<0&&(c+=360),t.length>3&&t[3]!==void 0?[c,s,a,t[3]]:[c,s,a]};E.prototype.hsl=function(){return io(this._rgb)};const Da=(...t)=>new E(...t,"hsl");N.hsl=Da;R.format.hsl=yn;R.autodetect.push({p:2,test:(...t)=>{if(t=j(t,"hsl"),P(t)==="array"&&t.length===3)return"hsl"}});const Ma=(t,e,n)=>ie(t,e,n,"hsl");st.hsl=Ma;const{floor:$a}=Math,La=(...t)=>{t=j(t,"hsv");let[e,n,r]=t,o,i,a;if(r*=255,n===0)o=i=a=r;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const s=$a(e),c=e-s,f=r*(1-n),u=r*(1-n*c),d=r*(1-n*(1-c));switch(s){case 0:[o,i,a]=[r,d,f];break;case 1:[o,i,a]=[u,r,f];break;case 2:[o,i,a]=[f,r,d];break;case 3:[o,i,a]=[f,u,r];break;case 4:[o,i,a]=[d,f,r];break;case 5:[o,i,a]=[r,f,u];break}}return[o,i,a,t.length>3?t[3]:1]},{min:Ra,max:ja}=Math,Na=(...t)=>{t=j(t,"rgb");let[e,n,r]=t;const o=Ra(e,n,r),i=ja(e,n,r),a=i-o;let s,c,f;return f=i/255,i===0?(s=Number.NaN,c=0):(c=a/i,e===i&&(s=(n-r)/a),n===i&&(s=2+(r-e)/a),r===i&&(s=4+(e-n)/a),s*=60,s<0&&(s+=360)),[s,c,f]};E.prototype.hsv=function(){return Na(this._rgb)};const Pa=(...t)=>new E(...t,"hsv");N.hsv=Pa;R.format.hsv=La;R.autodetect.push({p:2,test:(...t)=>{if(t=j(t,"hsv"),P(t)==="array"&&t.length===3)return"hsv"}});const Ba=(t,e,n)=>ie(t,e,n,"hsv");st.hsv=Ba;function Ue(t,e){let n=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(a=>[a]));let r=e[0].length,o=e[0].map((a,s)=>e.map(c=>c[s])),i=t.map(a=>o.map(s=>Array.isArray(a)?a.reduce((c,f,u)=>c+f*(s[u]||0),0):s.reduce((c,f)=>c+f*a,0)));return n===1&&(i=i[0]),r===1?i.map(a=>a[0]):i}const Nn=(...t)=>{t=j(t,"lab");const[e,n,r,...o]=t,[i,a,s]=Ia([e,n,r]),[c,f,u]=to(i,a,s);return[c,f,u,...o.length>0&&o[0]<1?[o[0]]:[]]};function Ia(t){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],n=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],r=Ue(n,t);return Ue(e,r.map(o=>o**3))}const Pn=(...t)=>{const[e,n,r,...o]=j(t,"rgb"),i=eo(e,n,r);return[...Wa(i),...o.length>0&&o[0]<1?[o[0]]:[]]};function Wa(t){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],n=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=Ue(e,t);return Ue(n,r.map(o=>Math.cbrt(o)))}E.prototype.oklab=function(){return Pn(this._rgb)};const Ua=(...t)=>new E(...t,"oklab");Object.assign(N,{oklab:Ua});R.format.oklab=Nn;R.autodetect.push({p:2,test:(...t)=>{if(t=j(t,"oklab"),P(t)==="array"&&t.length===3)return"oklab"}});const Ha=(t,e,n)=>{const r=t.oklab(),o=e.oklab();return new E(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"oklab")};st.oklab=Ha;const Va=(t,e,n)=>ie(t,e,n,"oklch");st.oklch=Va;const{pow:cn,sqrt:un,PI:fn,cos:ar,sin:cr,atan2:za}=Math,qa=(t,e="lrgb",n=null)=>{const r=t.length;n||(n=Array.from(new Array(r)).map(()=>1));const o=r/n.reduce(function(d,p){return d+p});if(n.forEach((d,p)=>{n[p]*=o}),t=t.map(d=>new E(d)),e==="lrgb")return Fa(t,n);const i=t.shift(),a=i.get(e),s=[];let c=0,f=0;for(let d=0;d<a.length;d++)if(a[d]=(a[d]||0)*n[0],s.push(isNaN(a[d])?0:n[0]),e.charAt(d)==="h"&&!isNaN(a[d])){const p=a[d]/180*fn;c+=ar(p)*n[0],f+=cr(p)*n[0]}let u=i.alpha()*n[0];t.forEach((d,p)=>{const m=d.get(e);u+=d.alpha()*n[p+1];for(let v=0;v<a.length;v++)if(!isNaN(m[v]))if(s[v]+=n[p+1],e.charAt(v)==="h"){const w=m[v]/180*fn;c+=ar(w)*n[p+1],f+=cr(w)*n[p+1]}else a[v]+=m[v]*n[p+1]});for(let d=0;d<a.length;d++)if(e.charAt(d)==="h"){let p=za(f/s[d],c/s[d])/fn*180;for(;p<0;)p+=360;for(;p>=360;)p-=360;a[d]=p}else a[d]=a[d]/s[d];return u/=r,new E(a,e).alpha(u>.99999?1:u,!0)},Fa=(t,e)=>{const n=t.length,r=[0,0,0,0];for(let o=0;o<t.length;o++){const i=t[o],a=e[o]/n,s=i._rgb;r[0]+=cn(s[0],2)*a,r[1]+=cn(s[1],2)*a,r[2]+=cn(s[2],2)*a,r[3]+=s[3]*a}return r[0]=un(r[0]),r[1]=un(r[1]),r[2]=un(r[2]),r[3]>.9999999&&(r[3]=1),new E(Mn(r))},{pow:Ya}=Math;function He(t){let e="rgb",n=N("#ccc"),r=0,o=[0,1],i=[],a=[0,0],s=!1,c=[],f=!1,u=0,d=1,p=!1,m={},v=!0,w=1;const y=function(b){if(b=b||["#fff","#000"],b&&P(b)==="string"&&N.brewer&&N.brewer[b.toLowerCase()]&&(b=N.brewer[b.toLowerCase()]),P(b)==="array"){b.length===1&&(b=[b[0],b[0]]),b=b.slice(0);for(let O=0;O<b.length;O++)b[O]=N(b[O]);i.length=0;for(let O=0;O<b.length;O++)i.push(O/(b.length-1))}return S(),c=b},x=function(b){if(s!=null){const O=s.length-1;let k=0;for(;k<O&&b>=s[k];)k++;return k-1}return 0};let T=b=>b,D=b=>b;const l=function(b,O){let k,C;if(O==null&&(O=!1),isNaN(b)||b===null)return n;O?C=b:s&&s.length>2?C=x(b)/(s.length-2):d!==u?C=(b-u)/(d-u):C=1,C=D(C),O||(C=T(C)),w!==1&&(C=Ya(C,w)),C=a[0]+C*(1-a[0]-a[1]),C=zt(C,0,1);const A=Math.floor(C*1e4);if(v&&m[A])k=m[A];else{if(P(c)==="array")for(let _=0;_<i.length;_++){const $=i[_];if(C<=$){k=c[_];break}if(C>=$&&_===i.length-1){k=c[_];break}if(C>$&&C<i[_+1]){C=(C-$)/(i[_+1]-$),k=N.interpolate(c[_],c[_+1],C,e);break}}else P(c)==="function"&&(k=c(C));v&&(m[A]=k)}return k};var S=()=>m={};y(t);const h=function(b){const O=N(l(b));return f&&O[f]?O[f]():O};return h.classes=function(b){if(b!=null){if(P(b)==="array")s=b,o=[b[0],b[b.length-1]];else{const O=N.analyze(o);b===0?s=[O.min,O.max]:s=N.limits(O,"e",b)}return h}return s},h.domain=function(b){if(!arguments.length)return o;u=b[0],d=b[b.length-1],i=[];const O=c.length;if(b.length===O&&u!==d)for(let k of Array.from(b))i.push((k-u)/(d-u));else{for(let k=0;k<O;k++)i.push(k/(O-1));if(b.length>2){const k=b.map((A,_)=>_/(b.length-1)),C=b.map(A=>(A-u)/(d-u));C.every((A,_)=>k[_]===A)||(D=A=>{if(A<=0||A>=1)return A;let _=0;for(;A>=C[_+1];)_++;const $=(A-C[_])/(C[_+1]-C[_]);return k[_]+$*(k[_+1]-k[_])})}}return o=[u,d],h},h.mode=function(b){return arguments.length?(e=b,S(),h):e},h.range=function(b,O){return y(b),h},h.out=function(b){return f=b,h},h.spread=function(b){return arguments.length?(r=b,h):r},h.correctLightness=function(b){return b==null&&(b=!0),p=b,S(),p?T=function(O){const k=l(0,!0).lab()[0],C=l(1,!0).lab()[0],A=k>C;let _=l(O,!0).lab()[0];const $=k+(C-k)*O;let U=_-$,G=0,H=1,F=20;for(;Math.abs(U)>.01&&F-- >0;)(function(){return A&&(U*=-1),U<0?(G=O,O+=(H-O)*.5):(H=O,O+=(G-O)*.5),_=l(O,!0).lab()[0],U=_-$})();return O}:T=O=>O,h},h.padding=function(b){return b!=null?(P(b)==="number"&&(b=[b,b]),a=b,h):a},h.colors=function(b,O){arguments.length<2&&(O="hex");let k=[];if(arguments.length===0)k=c.slice(0);else if(b===1)k=[h(.5)];else if(b>1){const C=o[0],A=o[1]-C;k=Xa(0,b).map(_=>h(C+_/(b-1)*A))}else{t=[];let C=[];if(s&&s.length>2)for(let A=1,_=s.length,$=1<=_;$?A<_:A>_;$?A++:A--)C.push((s[A-1]+s[A])*.5);else C=o;k=C.map(A=>h(A))}return N[O]&&(k=k.map(C=>C[O]())),k},h.cache=function(b){return b!=null?(v=b,h):v},h.gamma=function(b){return b!=null?(w=b,h):w},h.nodata=function(b){return b!=null?(n=N(b),h):n},h}function Xa(t,e,n){let r=[],o=t<e,i=e;for(let a=t;o?a<i:a>i;o?a++:a--)r.push(a);return r}const Ga=function(t){let e=[1,1];for(let n=1;n<t;n++){let r=[1];for(let o=1;o<=e.length;o++)r[o]=(e[o]||0)+e[o-1];e=r}return e},Ka=function(t){let e,n,r,o;if(t=t.map(i=>new E(i)),t.length===2)[n,r]=t.map(i=>i.lab()),e=function(i){const a=[0,1,2].map(s=>n[s]+i*(r[s]-n[s]));return new E(a,"lab")};else if(t.length===3)[n,r,o]=t.map(i=>i.lab()),e=function(i){const a=[0,1,2].map(s=>(1-i)*(1-i)*n[s]+2*(1-i)*i*r[s]+i*i*o[s]);return new E(a,"lab")};else if(t.length===4){let i;[n,r,o,i]=t.map(a=>a.lab()),e=function(a){const s=[0,1,2].map(c=>(1-a)*(1-a)*(1-a)*n[c]+3*(1-a)*(1-a)*a*r[c]+3*(1-a)*a*a*o[c]+a*a*a*i[c]);return new E(s,"lab")}}else if(t.length>=5){let i,a,s;i=t.map(c=>c.lab()),s=t.length-1,a=Ga(s),e=function(c){const f=1-c,u=[0,1,2].map(d=>i.reduce((p,m,v)=>p+a[v]*f**(s-v)*c**v*m[d],0));return new E(u,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},Za=t=>{const e=Ka(t);return e.scale=()=>He(e),e},{round:so}=Math;E.prototype.rgb=function(t=!0){return t===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(so)};E.prototype.rgba=function(t=!0){return this._rgb.slice(0,4).map((e,n)=>n<3?t===!1?e:so(e):e)};const Ja=(...t)=>new E(...t,"rgb");Object.assign(N,{rgb:Ja});R.format.rgb=(...t)=>{const e=j(t,"rgba");return e[3]===void 0&&(e[3]=1),e};R.autodetect.push({p:3,test:(...t)=>{if(t=j(t,"rgba"),P(t)==="array"&&(t.length===3||t.length===4&&P(t[3])=="number"&&t[3]>=0&&t[3]<=1))return"rgb"}});const xt=(t,e,n)=>{if(!xt[n])throw new Error("unknown blend mode "+n);return xt[n](t,e)},Pt=t=>(e,n)=>{const r=N(n).rgb(),o=N(e).rgb();return N.rgb(t(r,o))},Bt=t=>(e,n)=>{const r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r},Qa=t=>t,tc=(t,e)=>t*e/255,ec=(t,e)=>t>e?e:t,nc=(t,e)=>t>e?t:e,rc=(t,e)=>255*(1-(1-t/255)*(1-e/255)),oc=(t,e)=>e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255)),ic=(t,e)=>255*(1-(1-e/255)/(t/255)),sc=(t,e)=>t===255?255:(t=255*(e/255)/(1-t/255),t>255?255:t);xt.normal=Pt(Bt(Qa));xt.multiply=Pt(Bt(tc));xt.screen=Pt(Bt(rc));xt.overlay=Pt(Bt(oc));xt.darken=Pt(Bt(ec));xt.lighten=Pt(Bt(nc));xt.dodge=Pt(Bt(sc));xt.burn=Pt(Bt(ic));const{pow:ac,sin:cc,cos:uc}=Math;function fc(t=300,e=-1.5,n=1,r=1,o=[0,1]){let i=0,a;P(o)==="array"?a=o[1]-o[0]:(a=0,o=[o,o]);const s=function(c){const f=Dt*((t+120)/360+e*c),u=ac(o[0]+a*c,r),p=(i!==0?n[0]+c*i:n)*u*(1-u)/2,m=uc(f),v=cc(f),w=u+p*(-.14861*m+1.78277*v),y=u+p*(-.29227*m-.90649*v),x=u+p*(1.97294*m);return N(Mn([w*255,y*255,x*255,1]))};return s.start=function(c){return c==null?t:(t=c,s)},s.rotations=function(c){return c==null?e:(e=c,s)},s.gamma=function(c){return c==null?r:(r=c,s)},s.hue=function(c){return c==null?n:(n=c,P(n)==="array"?(i=n[1]-n[0],i===0&&(n=n[1])):i=0,s)},s.lightness=function(c){return c==null?o:(P(c)==="array"?(o=c,a=c[1]-c[0]):(o=[c,c],a=0),s)},s.scale=()=>N.scale(s),s.hue(n),s}const lc="0123456789abcdef",{floor:dc,random:pc}=Math,hc=()=>{let t="#";for(let e=0;e<6;e++)t+=lc.charAt(dc(pc()*16));return new E(t,"hex")},{log:ur,pow:mc,floor:bc,abs:vc}=Math;function ao(t,e=null){const n={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return P(t)==="object"&&(t=Object.values(t)),t.forEach(r=>{e&&P(r)==="object"&&(r=r[e]),r!=null&&!isNaN(r)&&(n.values.push(r),n.sum+=r,r<n.min&&(n.min=r),r>n.max&&(n.max=r),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(r,o)=>co(n,r,o),n}function co(t,e="equal",n=7){P(t)=="array"&&(t=ao(t));const{min:r,max:o}=t,i=t.values.sort((s,c)=>s-c);if(n===1)return[r,o];const a=[];if(e.substr(0,1)==="c"&&(a.push(r),a.push(o)),e.substr(0,1)==="e"){a.push(r);for(let s=1;s<n;s++)a.push(r+s/n*(o-r));a.push(o)}else if(e.substr(0,1)==="l"){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const s=Math.LOG10E*ur(r),c=Math.LOG10E*ur(o);a.push(r);for(let f=1;f<n;f++)a.push(mc(10,s+f/n*(c-s)));a.push(o)}else if(e.substr(0,1)==="q"){a.push(r);for(let s=1;s<n;s++){const c=(i.length-1)*s/n,f=bc(c);if(f===c)a.push(i[f]);else{const u=c-f;a.push(i[f]*(1-u)+i[f+1]*u)}}a.push(o)}else if(e.substr(0,1)==="k"){let s;const c=i.length,f=new Array(c),u=new Array(n);let d=!0,p=0,m=null;m=[],m.push(r);for(let y=1;y<n;y++)m.push(r+y/n*(o-r));for(m.push(o);d;){for(let x=0;x<n;x++)u[x]=0;for(let x=0;x<c;x++){const T=i[x];let D=Number.MAX_VALUE,l;for(let S=0;S<n;S++){const h=vc(m[S]-T);h<D&&(D=h,l=S),u[l]++,f[x]=l}}const y=new Array(n);for(let x=0;x<n;x++)y[x]=null;for(let x=0;x<c;x++)s=f[x],y[s]===null?y[s]=i[x]:y[s]+=i[x];for(let x=0;x<n;x++)y[x]*=1/u[x];d=!1;for(let x=0;x<n;x++)if(y[x]!==m[x]){d=!0;break}m=y,p++,p>200&&(d=!1)}const v={};for(let y=0;y<n;y++)v[y]=[];for(let y=0;y<c;y++)s=f[y],v[s].push(i[y]);let w=[];for(let y=0;y<n;y++)w.push(v[y][0]),w.push(v[y][v[y].length-1]);w=w.sort((y,x)=>y-x),a.push(w[0]);for(let y=1;y<w.length;y+=2){const x=w[y];!isNaN(x)&&a.indexOf(x)===-1&&a.push(x)}}return a}const gc=(t,e)=>{t=new E(t),e=new E(e);const n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const fr=.027,yc=5e-4,wc=.1,lr=1.14,je=.022,dr=1.414,xc=(t,e)=>{t=new E(t),e=new E(e),t.alpha()<1&&(t=re(e,t,t.alpha(),"rgb"));const n=pr(...t.rgb()),r=pr(...e.rgb()),o=n>=je?n:n+Math.pow(je-n,dr),i=r>=je?r:r+Math.pow(je-r,dr),a=Math.pow(i,.56)-Math.pow(o,.57),s=Math.pow(i,.65)-Math.pow(o,.62),c=Math.abs(i-o)<yc?0:o<i?a*lr:s*lr;return(Math.abs(c)<wc?0:c>0?c-fr:c+fr)*100};function pr(t,e,n){return .2126729*Math.pow(t/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(n/255,2.4)}const{sqrt:At,pow:tt,min:Ec,max:kc,atan2:hr,abs:mr,cos:Ne,sin:br,exp:Oc,PI:vr}=Math;function Cc(t,e,n=1,r=1,o=1){var i=function(Y){return 360*Y/(2*vr)},a=function(Y){return 2*vr*Y/360};t=new E(t),e=new E(e);const[s,c,f]=Array.from(t.lab()),[u,d,p]=Array.from(e.lab()),m=(s+u)/2,v=At(tt(c,2)+tt(f,2)),w=At(tt(d,2)+tt(p,2)),y=(v+w)/2,x=.5*(1-At(tt(y,7)/(tt(y,7)+tt(25,7)))),T=c*(1+x),D=d*(1+x),l=At(tt(T,2)+tt(f,2)),S=At(tt(D,2)+tt(p,2)),h=(l+S)/2,b=i(hr(f,T)),O=i(hr(p,D)),k=b>=0?b:b+360,C=O>=0?O:O+360,A=mr(k-C)>180?(k+C+360)/2:(k+C)/2,_=1-.17*Ne(a(A-30))+.24*Ne(a(2*A))+.32*Ne(a(3*A+6))-.2*Ne(a(4*A-63));let $=C-k;$=mr($)<=180?$:C<=k?$+360:$-360,$=2*At(l*S)*br(a($)/2);const U=u-s,G=S-l,H=1+.015*tt(m-50,2)/At(20+tt(m-50,2)),F=1+.045*h,V=1+.015*h*_,K=30*Oc(-tt((A-275)/25,2)),Q=-(2*At(tt(h,7)/(tt(h,7)+tt(25,7))))*br(2*a(K)),ot=At(tt(U/(n*H),2)+tt(G/(r*F),2)+tt($/(o*V),2)+Q*(G/(r*F))*($/(o*V)));return kc(0,Ec(100,ot))}function Sc(t,e,n="lab"){t=new E(t),e=new E(e);const r=t.get(n),o=e.get(n);let i=0;for(let a in r){const s=(r[a]||0)-(o[a]||0);i+=s*s}return Math.sqrt(i)}const _c=(...t)=>{try{return new E(...t),!0}catch{return!1}},Tc={cool(){return He([N.hsl(180,1,.9),N.hsl(250,.7,.4)])},hot(){return He(["#000","#f00","#ff0","#fff"]).mode("rgb")}},wn={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},uo=Object.keys(wn),gr=new Map(uo.map(t=>[t.toLowerCase(),t])),Ac=typeof Proxy=="function"?new Proxy(wn,{get(t,e){const n=e.toLowerCase();if(gr.has(n))return t[gr.get(n)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(uo)}}):wn,Dc=(...t)=>{t=j(t,"cmyk");const[e,n,r,o]=t,i=t.length>4?t[4]:1;return o===1?[0,0,0,i]:[e>=1?0:255*(1-e)*(1-o),n>=1?0:255*(1-n)*(1-o),r>=1?0:255*(1-r)*(1-o),i]},{max:yr}=Math,Mc=(...t)=>{let[e,n,r]=j(t,"rgb");e=e/255,n=n/255,r=r/255;const o=1-yr(e,yr(n,r)),i=o<1?1/(1-o):0,a=(1-e-o)*i,s=(1-n-o)*i,c=(1-r-o)*i;return[a,s,c,o]};E.prototype.cmyk=function(){return Mc(this._rgb)};const $c=(...t)=>new E(...t,"cmyk");Object.assign(N,{cmyk:$c});R.format.cmyk=Dc;R.autodetect.push({p:2,test:(...t)=>{if(t=j(t,"cmyk"),P(t)==="array"&&t.length===4)return"cmyk"}});const Lc=(...t)=>{const e=j(t,"hsla");let n=oe(t)||"lsa";return e[0]=ht(e[0]||0)+"deg",e[1]=ht(e[1]*100)+"%",e[2]=ht(e[2]*100)+"%",n==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),n="hsla"):e.length=3,`${n.substr(0,3)}(${e.join(" ")})`},Rc=(...t)=>{const e=j(t,"lab");let n=oe(t)||"lab";return e[0]=ht(e[0])+"%",e[1]=ht(e[1]),e[2]=ht(e[2]),n==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},jc=(...t)=>{const e=j(t,"lch");let n=oe(t)||"lab";return e[0]=ht(e[0])+"%",e[1]=ht(e[1]),e[2]=isNaN(e[2])?"none":ht(e[2])+"deg",n==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},Nc=(...t)=>{const e=j(t,"lab");return e[0]=ht(e[0]*100)+"%",e[1]=gn(e[1]),e[2]=gn(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},fo=(...t)=>{const[e,n,r,...o]=j(t,"rgb"),[i,a,s]=Pn(e,n,r),[c,f,u]=ro(i,a,s);return[c,f,u,...o.length>0&&o[0]<1?[o[0]]:[]]},Pc=(...t)=>{const e=j(t,"lch");return e[0]=ht(e[0]*100)+"%",e[1]=gn(e[1]),e[2]=isNaN(e[2])?"none":ht(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:ln}=Math,Bc=(...t)=>{const e=j(t,"rgba");let n=oe(t)||"rgb";if(n.substr(0,3)==="hsl")return Lc(io(e),n);if(n.substr(0,3)==="lab"){const r=ge();Mt("d50");const o=Rc(Ln(e),n);return Mt(r),o}if(n.substr(0,3)==="lch"){const r=ge();Mt("d50");const o=jc(jn(e),n);return Mt(r),o}return n.substr(0,5)==="oklab"?Nc(Pn(e)):n.substr(0,5)==="oklch"?Pc(fo(e)):(e[0]=ln(e[0]),e[1]=ln(e[1]),e[2]=ln(e[2]),(n==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),n="rgba"),`${n.substr(0,3)}(${e.slice(0,n==="rgb"?3:4).join(" ")})`)},lo=(...t)=>{t=j(t,"lch");const[e,n,r,...o]=t,[i,a,s]=no(e,n,r),[c,f,u]=Nn(i,a,s);return[c,f,u,...o.length>0&&o[0]<1?[o[0]]:[]]},$t=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,wt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Ve=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,vt=/\s*/.source,se=/\s+/.source,Bn=/\s*,\s*/.source,Ye=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,ae=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,po=new RegExp("^rgba?\\("+vt+[$t,$t,$t].join(se)+ae+"\\)$"),ho=new RegExp("^rgb\\("+vt+[$t,$t,$t].join(Bn)+vt+"\\)$"),mo=new RegExp("^rgba\\("+vt+[$t,$t,$t,wt].join(Bn)+vt+"\\)$"),bo=new RegExp("^hsla?\\("+vt+[Ye,Ve,Ve].join(se)+ae+"\\)$"),vo=new RegExp("^hsl?\\("+vt+[Ye,Ve,Ve].join(Bn)+vt+"\\)$"),go=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,yo=new RegExp("^lab\\("+vt+[wt,wt,wt].join(se)+ae+"\\)$"),wo=new RegExp("^lch\\("+vt+[wt,wt,Ye].join(se)+ae+"\\)$"),xo=new RegExp("^oklab\\("+vt+[wt,wt,wt].join(se)+ae+"\\)$"),Eo=new RegExp("^oklch\\("+vt+[wt,wt,Ye].join(se)+ae+"\\)$"),{round:ko}=Math,Kt=t=>t.map((e,n)=>n<=2?zt(ko(e),0,255):e),et=(t,e=0,n=100,r=!1)=>(typeof t=="string"&&t.endsWith("%")&&(t=parseFloat(t.substring(0,t.length-1))/100,r?t=e+(t+1)*.5*(n-e):t=e+t*(n-e)),+t),ct=(t,e)=>t==="none"?e:t,In=t=>{if(t=t.toLowerCase().trim(),t==="transparent")return[0,0,0,0];let e;if(R.format.named)try{return R.format.named(t)}catch{}if((e=t.match(po))||(e=t.match(ho))){let n=e.slice(1,4);for(let o=0;o<3;o++)n[o]=+et(ct(n[o],0),0,255);n=Kt(n);const r=e[4]!==void 0?+et(e[4],0,1):1;return n[3]=r,n}if(e=t.match(mo)){const n=e.slice(1,5);for(let r=0;r<4;r++)n[r]=+et(n[r],0,255);return n}if((e=t.match(bo))||(e=t.match(vo))){const n=e.slice(1,4);n[0]=+ct(n[0].replace("deg",""),0),n[1]=+et(ct(n[1],0),0,100)*.01,n[2]=+et(ct(n[2],0),0,100)*.01;const r=Kt(yn(n)),o=e[4]!==void 0?+et(e[4],0,1):1;return r[3]=o,r}if(e=t.match(go)){const n=e.slice(1,4);n[1]*=.01,n[2]*=.01;const r=yn(n);for(let o=0;o<3;o++)r[o]=ko(r[o]);return r[3]=+e[4],r}if(e=t.match(yo)){const n=e.slice(1,4);n[0]=et(ct(n[0],0),0,100),n[1]=et(ct(n[1],0),-125,125,!0),n[2]=et(ct(n[2],0),-125,125,!0);const r=ge();Mt("d50");const o=Kt($n(n));Mt(r);const i=e[4]!==void 0?+et(e[4],0,1):1;return o[3]=i,o}if(e=t.match(wo)){const n=e.slice(1,4);n[0]=et(n[0],0,100),n[1]=et(ct(n[1],0),0,150,!1),n[2]=+ct(n[2].replace("deg",""),0);const r=ge();Mt("d50");const o=Kt(Rn(n));Mt(r);const i=e[4]!==void 0?+et(e[4],0,1):1;return o[3]=i,o}if(e=t.match(xo)){const n=e.slice(1,4);n[0]=et(ct(n[0],0),0,1),n[1]=et(ct(n[1],0),-.4,.4,!0),n[2]=et(ct(n[2],0),-.4,.4,!0);const r=Kt(Nn(n)),o=e[4]!==void 0?+et(e[4],0,1):1;return r[3]=o,r}if(e=t.match(Eo)){const n=e.slice(1,4);n[0]=et(ct(n[0],0),0,1),n[1]=et(ct(n[1],0),0,.4,!1),n[2]=+ct(n[2].replace("deg",""),0);const r=Kt(lo(n)),o=e[4]!==void 0?+et(e[4],0,1):1;return r[3]=o,r}};In.test=t=>po.test(t)||bo.test(t)||yo.test(t)||wo.test(t)||xo.test(t)||Eo.test(t)||ho.test(t)||mo.test(t)||vo.test(t)||go.test(t)||t==="transparent";E.prototype.css=function(t){return Bc(this._rgb,t)};const Ic=(...t)=>new E(...t,"css");N.css=Ic;R.format.css=In;R.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&P(t)==="string"&&In.test(t))return"css"}});R.format.gl=(...t)=>{const e=j(t,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const Wc=(...t)=>new E(...t,"gl");N.gl=Wc;E.prototype.gl=function(){const t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};E.prototype.hex=function(t){return Qr(this._rgb,t)};const Uc=(...t)=>new E(...t,"hex");N.hex=Uc;R.format.hex=Jr;R.autodetect.push({p:4,test:(t,...e)=>{if(!e.length&&P(t)==="string"&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});const{log:Pe}=Math,Oo=t=>{const e=t/100;let n,r,o;return e<66?(n=255,r=e<6?0:-155.25485562709179-.44596950469579133*(r=e-2)+104.49216199393888*Pe(r),o=e<20?0:-254.76935184120902+.8274096064007395*(o=e-10)+115.67994401066147*Pe(o)):(n=351.97690566805693+.114206453784165*(n=e-55)-40.25366309332127*Pe(n),r=325.4494125711974+.07943456536662342*(r=e-50)-28.0852963507957*Pe(r),o=255),[n,r,o,1]},{round:Hc}=Math,Vc=(...t)=>{const e=j(t,"rgb"),n=e[0],r=e[2];let o=1e3,i=4e4;const a=.4;let s;for(;i-o>a;){s=(i+o)*.5;const c=Oo(s);c[2]/c[0]>=r/n?i=s:o=s}return Hc(s)};E.prototype.temp=E.prototype.kelvin=E.prototype.temperature=function(){return Vc(this._rgb)};const dn=(...t)=>new E(...t,"temp");Object.assign(N,{temp:dn,kelvin:dn,temperature:dn});R.format.temp=R.format.kelvin=R.format.temperature=Oo;E.prototype.oklch=function(){return fo(this._rgb)};const zc=(...t)=>new E(...t,"oklch");Object.assign(N,{oklch:zc});R.format.oklch=lo;R.autodetect.push({p:2,test:(...t)=>{if(t=j(t,"oklch"),P(t)==="array"&&t.length===3)return"oklch"}});Object.assign(N,{analyze:ao,average:qa,bezier:Za,blend:xt,brewer:Ac,Color:E,colors:ne,contrast:gc,contrastAPCA:xc,cubehelix:fc,deltaE:Cc,distance:Sc,input:R,interpolate:re,limits:co,mix:re,random:hc,scale:He,scales:Tc,valid:_c});function qc(){const{weekId:t}=Lo({from:wr.id}),e=Ro(),n=t==null?void 0:t.match(/^(\d{1,2})_(\d{4})_([lr])$/);if(!n)return null;const[,r,o,i]=n,a=parseInt(r,10),s=i==="r"?"l":"r",u=`/weekly/${`${i==="r"?a+1:a}_${o}_${s}`}`,d=i==="l"?"r":"l",v=`/weekly/${`${i==="l"?a-1:a}_${o}_${d}`}`;return W.jsxs("div",{className:"page-navigation",children:[W.jsx("button",{className:"button-prev",onClick:()=>e({to:v})}),W.jsx("button",{className:"button-next",onClick:()=>e({to:u})})]})}const Fc=new Set(["img","br","hr","input","meta","link","area","base","col","embed","param","source","track","wbr"]),Co=({template:t,data:e,components:n,page_id:r,tldraw_snapshots:o,leftCalendarData:i,rightCalendarData:a,primaryColor:s,children:c})=>{var x,T,D,l;const f=((x=t==null?void 0:t.content)==null?void 0:x.structure)||[],u=X.useRef(0),d=X.useRef(0),p=X.useRef(1),m=((l=(D=(T=t==null?void 0:t.content)==null?void 0:T.metadata)==null?void 0:D.default_styles)==null?void 0:l["week-start-day"])||"Mon",v=Z.useMemo(()=>{const S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=S.indexOf(m);return h===-1?S:[...S.slice(h),...S.slice(0,h)].slice(0,7)},[m]);X.useEffect(()=>{d.current=0,p.current=1},[e]);const w=Z.useMemo(()=>s?{primary:s,secondary:N.mix("#fff",s,.15).hex(),ternary:N.mix("#fff",s,.05).hex(),quaternary:N(s).darken(.3).hex()}:{primary:"#000",secondary:"#222",ternary:"#333",quaternary:"#444"},[s]),y=(S,h,b={})=>{var ot,Y,nt,rt,it;const{component:O,class:k="",children:C,component_type:A,component_props:_,attributes:$={},styles:U={},selfClosing:G}=S,H=A?n[A]:O,F=Fc.has(O),V=`${O}-${u.current++}`;let K=null;if(k==="month-name")K=(h==null?void 0:h.month_year)||((ot=e==null?void 0:e[0])==null?void 0:ot.month_year)||"";else if(k==="week-days"){const z=parseInt((Y=S.attributes)==null?void 0:Y.id,10);z>=1&&z<=7&&(K=((nt=v[z-1])==null?void 0:nt.charAt(0))||"")}else h&&(k==="day-number"&&(K=h.day_number),k==="day-name"&&(K=h.day_name),k==="holiday-box"&&(K=(Array.isArray(h.holiday)?h.holiday:[h.holiday].filter(Boolean)).join(", ")),k==="moon-phase"&&(K=h.moon_phase));if(G||F)return Z.createElement(H,{key:V,className:k,style:U,...$});let J={...b};if(k==="wl-day-section"||k==="wr-day-section"){const z=e[d.current]||{};return d.current++,W.jsx(H,{className:k,style:U,...$,..._,children:C==null?void 0:C.map(B=>y(B,z,J))},V)}if(k==="wr-cal-left"&&(J.calendarSide="left"),k==="wr-cal-right"&&(J.calendarSide="right"),k==="wr-calendar-button"){const z=parseInt((rt=S.attributes)==null?void 0:rt.id,10),B=J.calendarSide==="left"?i:a,Et=((it=B==null?void 0:B.buttonData)==null?void 0:it[z])||"";return Z.createElement(H,{key:V,className:k,style:U,...$,..._},Et)}if(k==="month-year"){const z=J.calendarSide==="left"?i:a,B=(z==null?void 0:z.month)||"";return Z.createElement(H,{key:V,className:k,style:U,...$},B)}if(k.includes("tiptap")){const z=p.current++;return W.jsx(Yr,{tiptap_id:z,pageId:r,className:k},V)}const Q={...S.attrs};if(Q&&Q["data-color"]){const z=Q["data-color"],B=w[z]||"#000";return S.component==="path"&&(Q.stroke=B,Q.fill=B),S.component==="rect"&&(Q.fill=B),Z.createElement(H,{key:V,className:k,style:U,...Q,..._})}return W.jsxs(H,{className:k,style:U,...$,..._,children:[K!==null&&K,C==null?void 0:C.map(z=>y(z,h,J))]},V)};return W.jsxs("div",{className:"planner-container",children:[W.jsx(W.Fragment,{children:W.jsx(qc,{})}),c,W.jsx(Or,{persistenceKey:r,tldraw_snapshots:o,plannerId:"38e012ec-0ab2-4fbe-8e68-8a75e4716a35"}),f.map(S=>W.jsx(Z.Fragment,{children:y(S,void 0,{})},`fragment-${u.current++}`))]})},So=({svgUrl:t,primaryColor:e="#000"})=>{const[n,r]=X.useState(null);return X.useEffect(()=>{(async()=>{try{const i=await fetch(t);if(!i.ok)throw new Error(`Failed to fetch SVG: ${i.status}`);const a=await i.text(),c=new DOMParser().parseFromString(a,"image/svg+xml"),f=c.getElementsByTagName("parsererror");if(f.length>0)throw new Error("SVG XML Error: "+f[0].textContent);const u={primary:e,secondary:N.mix(e,.15).hex(),ternary:N.mix(e,.05).hex(),quaternary:N(e).darken(.3).hex()};Object.entries(u).forEach(([m,v])=>{c.querySelectorAll(`[data-color="${m}"]`).forEach(w=>{const y=w.tagName.toLowerCase(),x=w.hasAttribute("fill"),T=w.hasAttribute("stroke");w.removeAttribute("fill"),w.removeAttribute("stroke"),w.removeAttribute("stop-color"),["rect","circle","ellipse"].includes(y)||y==="path"&&x?w.setAttribute("fill",v):["path","line","polyline","polygon"].includes(y)&&T?w.setAttribute("stroke",v):y==="path"&&!T&&w.setAttribute("fill",v),y==="stop"&&w.setAttribute("stop-color",v)})});const d=new XMLSerializer().serializeToString(c),p=new Blob([d],{type:"image/svg+xml"});r(URL.createObjectURL(p))}catch(i){setError(i.message),console.error("SVG Error:",i)}})()},[t,e]),n?W.jsx("img",{src:n,alt:"Dynamic background",style:{position:"absolute",zIndex:0,width:"100%",height:"100%",pointerEvents:"none",backgroundColor:"white"}}):W.jsx("div",{className:"svg-loading",children:"Loading background..."})},Yc=({template:t,page_id:e,weekNumber:n,year:r,mainDates:o,holidays:i,moonPhases:a,endDate:s,plannerId:c,tldraw_snapshots:f})=>{var x,T,D,l,S;const u={Tiptap:h=>W.jsx(Tiptap,{...h,weekId:`${n}_${r}_l`}),TlDrawComponent:()=>W.jsx(TlDrawComponent,{persistenceKey:`weekly-${n}-${r}-r`,plannerId:c,tldraw_snapshots:f})},d=new Date(o[0]),p=((D=(T=(x=t==null?void 0:t.content)==null?void 0:x.metadata)==null?void 0:T.default_styles)==null?void 0:D["month-colors"])||{},m=d.toLocaleString("en-US",{month:"long"}).toLowerCase(),v=p[m]||"#ffffff",w=(S=(l=t==null?void 0:t.content)==null?void 0:l.metadata)==null?void 0:S.svgBackground,y=o.map(h=>{var A;const[b,O,k]=h.split("-").map(Number),C=new Date(b,O-1,k);return{page_id:e,month_year:C.toLocaleDateString("en-US",{month:"long"})+" "+r,day_number:C.getDate(),day_name:C.toLocaleDateString("en-US",{weekday:"long"}),holiday:i[h]||"",moon_phase:((A=a[h])==null?void 0:A.emoji)||""}});return W.jsx(Co,{template:t,data:y,components:u,page_id:e,primaryColor:v,tldraw_snapshots:f,children:W.jsx(So,{svgUrl:`${w}?v=${Date.now()}`,primaryColor:v})})},Xc=({template:t,page_id:e,weekNumber:n,year:r,mainDates:o,holidays:i,moonPhases:a,plannerId:s,tldraw_snapshots:c})=>{var U,G,H,F,V,K,J,Q,ot;const f={Tiptap:Y=>W.jsx(Yr,{...Y,weekId:`${n}_${r}_r`}),TlDrawComponent:()=>W.jsx(Or,{persistenceKey:`weekly-${n}-${r}-r`,plannerId:s,tldraw_snapshots:c})},u=o.map(Y=>({date:new Date(Y+"T00:00:00Z"),key:Y})),d=u[u.length-1].date,p=d.toISOString().split("T")[0],m=d.getUTCMonth(),v=d.getUTCFullYear(),w=new Date(Date.UTC(v,m+1,1)),y=w.getUTCMonth(),x=w.getUTCFullYear(),T=((H=(G=(U=t==null?void 0:t.content)==null?void 0:U.metadata)==null?void 0:G.default_styles)==null?void 0:H["week-start-day"])||"Mon",D=(Y,nt)=>{const rt=new Date(Date.UTC(nt,Y,1)),it=new Date(Date.UTC(nt,Y+1,0)),z=[];let B=[];const Et=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].indexOf(T);let Rt=(rt.getUTCDay()-Et+7)%7;for(let gt=0;gt<Rt;gt++)B.push(null);for(let gt=1;gt<=it.getUTCDate();gt++){const It=new Date(Date.UTC(nt,Y,gt));B.push(It),B.length===7&&(z.push(B),B=[])}if(B.length>0){for(;B.length<7;)B.push(null);z.push(B)}return z},l=D(m,v),S=D(y,x),h=(Y,nt=1)=>{const rt={};let it=nt;return Y.forEach(z=>{z.forEach(B=>{rt[it]=B?B.getUTCDate():"",it++})}),rt},b=h(l,1),O=h(S,1),k=((K=(V=(F=t==null?void 0:t.content)==null?void 0:F.metadata)==null?void 0:V.default_styles)==null?void 0:K["month-colors"])||{},C=d.toLocaleString("en-US",{month:"long",timeZone:"UTC"}).toLowerCase(),A=k[C]||"#ffffff",_=(Q=(J=t==null?void 0:t.content)==null?void 0:J.metadata)==null?void 0:Q.svgBackground,$=[{page_id:e,month_year:d.toLocaleString("en-US",{month:"long",timeZone:"UTC"})+" "+d.getUTCFullYear(),day_number:d.getUTCDate(),day_name:d.toLocaleString("en-US",{weekday:"long",timeZone:"UTC"}),holiday:i[p]||"",moon_phase:((ot=a[p])==null?void 0:ot.emoji)||"",left_calendar_month:`${new Date(Date.UTC(v,m)).toLocaleString("default",{month:"long",timeZone:"UTC"})} ${v}`,right_calendar_month:`${new Date(Date.UTC(x,y)).toLocaleString("default",{month:"long",timeZone:"UTC"})} ${x}`,left_button_data:b,right_button_data:O}];return W.jsx(Co,{template:t,data:$,components:f,page_id:e,primaryColor:A,tldraw_snapshots:c,leftCalendarData:{month:`${new Date(Date.UTC(v,m)).toLocaleString("default",{month:"long",timeZone:"UTC"})} ${v}`,buttonData:b},rightCalendarData:{month:`${new Date(Date.UTC(x,y)).toLocaleString("default",{month:"long",timeZone:"UTC"})} ${x}`,buttonData:O},children:W.jsx(So,{svgUrl:`${_}?v=${Date.now()}`,primaryColor:A})})},Zc=function(){const{template:e,weekData:n,page_id:r,planner_id:o,tldraw_snapshots:i}=jo({from:wr.id}),a={template:e,...n,page_id:r,plannerId:o,tldraw_snapshots:i};return n.side==="r"?W.jsx(Xc,{...a}):W.jsx(Yc,{...a})};export{Zc as component};
